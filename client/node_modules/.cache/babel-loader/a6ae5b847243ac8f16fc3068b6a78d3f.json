{"ast":null,"code":"var _jsxFileName = \"/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/src/StreamRoom/ViewerVideoPlayer.js\",\n    _s = $RefreshSig$();\n\nimport { useRef, useEffect, useContext, useState } from 'react';\nimport { SocketContext } from '../Context/SocketContext';\nimport { RoomContext } from '../Context/RoomContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ViewerVideoPlayer = () => {\n  _s();\n\n  const socket = useContext(SocketContext);\n  const VideoElement = useRef(null);\n  const [source, setSource] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [allowed, setAllowed] = useState(true); // Allow controller to have control;\n  //Disabling Keyboard Shortcuts\n\n  const shortCut = [{\n    keyCode: 32,\n    ctrl: false,\n    handle: () => {}\n  }, {\n    keyCode: 75,\n    ctrl: false,\n    handle: () => {}\n  }, {\n    keyCode: 39,\n    ctrl: false,\n    handle: () => {}\n  }, {\n    keyCode: 37,\n    ctrl: false,\n    handle: () => {}\n  }, {\n    keyCode: 74,\n    ctrl: false,\n    handle: () => {}\n  }, {\n    keyCode: 76,\n    ctrl: false,\n    handle: () => {}\n  }, {\n    keyCode: 35,\n    ctrl: false,\n    handle: () => {}\n  }, {\n    keyCode: 36,\n    ctrl: false,\n    handle: () => {}\n  }];\n  const [roomState, setRoomState] = useContext(RoomContext); //on Page render\n\n  useEffect(() => {\n    socket.emit(\"fetchVideo\", {\n      AdminID: roomState.AdminID\n    });\n  }); //controls functions\n\n  const play = () => VideoElement.current.play();\n\n  const pause = () => VideoElement.current.pause();\n\n  const moveToTimeStamp = seconds => VideoElement.current.currentTime = seconds;\n\n  const changePlaybackSpeed = speed => VideoElement.current.playbackRate = speed; // socket events\n\n\n  socket.off(\"setVideo\").on(\"setVideo\", res => {\n    console.log(res);\n    const seconds = res.time;\n    const videoPath = res.videoPath;\n    const videoTitle = res.title;\n    const videoDescription = res.description;\n    setSource(videoPath);\n    setTitle(videoTitle);\n    setDescription(videoDescription);\n    setTimeout(() => {\n      moveToTimeStamp(seconds);\n      play();\n    }, 1000);\n  });\n  socket.off('playPlayer').on('playPlayer', () => {\n    if (!allowed) return;\n    play();\n  });\n  socket.off('pausePlayer').on('pausePlayer', () => {\n    if (!allowed) return;\n    pause();\n  });\n  socket.off('setTime').on('setTime', res => {\n    if (!allowed) return;\n    const currentTime = res.currTime;\n    moveToTimeStamp(currentTime);\n  });\n  socket.off('changePlaybackSpeed').on('changePlaybackSpeed', res => {\n    if (!allowed) return;\n    const playbackSpeed = res.playbackSpeed;\n    changePlaybackSpeed(playbackSpeed);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex h-[40rem]\",\n      children: /*#__PURE__*/_jsxDEV(\"video\", {\n        ref: VideoElement,\n        className: \"w-[70%]\",\n        src: `http://localhost:9002/file/video/${source}`,\n        controls: !allowed,\n        controlsList: \"nodownload\",\n        preload: \"metadata\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"m-2 text-2xl dark:text-white font-bold h-20 flex\",\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setAllowed(!allowed),\n      class: \"bg-blue-500 hover:bg-blue-700 text-white font-bold  py-2  px-4 rounded-md\",\n      children: allowed ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs\",\n        children: \"Take Controls\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 33\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-md\",\n        children: \"AllowAdminControl\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 78\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"m-3 text-md dark:bg-opacity-10 p-3 dark:text-white rounded-3xl bg-gray-200 dark:bg-white\",\n      children: description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ViewerVideoPlayer, \"0cDEsk+sHhwhsRREpbUF2Zw21jE=\");\n\n_c = ViewerVideoPlayer;\nexport default ViewerVideoPlayer;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewerVideoPlayer\");","map":{"version":3,"names":["useRef","useEffect","useContext","useState","SocketContext","RoomContext","ViewerVideoPlayer","socket","VideoElement","source","setSource","title","setTitle","description","setDescription","allowed","setAllowed","shortCut","keyCode","ctrl","handle","roomState","setRoomState","emit","AdminID","play","current","pause","moveToTimeStamp","seconds","currentTime","changePlaybackSpeed","speed","playbackRate","off","on","res","console","log","time","videoPath","videoTitle","videoDescription","setTimeout","currTime","playbackSpeed"],"sources":["/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/src/StreamRoom/ViewerVideoPlayer.js"],"sourcesContent":["import { useRef, useEffect, useContext, useState } from 'react';\nimport { SocketContext } from '../Context/SocketContext';\nimport { RoomContext } from '../Context/RoomContext';\n\n\n\nconst ViewerVideoPlayer = () => {\n    const socket = useContext(SocketContext)\n    const VideoElement = useRef(null);\n    const [source, setSource] = useState(\"\")\n    const [title, setTitle] = useState(\"\")\n    const [description, setDescription] = useState(\"\")\n    const [allowed, setAllowed] = useState(true); // Allow controller to have control;\n\n\n    //Disabling Keyboard Shortcuts\n    const shortCut = [{ keyCode: 32, ctrl: false, handle: () => { } }, { keyCode: 75, ctrl: false, handle: () => { } }, { keyCode: 39, ctrl: false, handle: () => { } }, { keyCode: 37, ctrl: false, handle: () => { } }, { keyCode: 74, ctrl: false, handle: () => { } }, { keyCode: 76, ctrl: false, handle: () => { } }, { keyCode: 35, ctrl: false, handle: () => { } }, { keyCode: 36, ctrl: false, handle: () => { } },]\n    const [roomState, setRoomState] = useContext(RoomContext)\n    //on Page render\n    useEffect(() => {\n        socket.emit(\"fetchVideo\", { AdminID: roomState.AdminID });\n    })\n\n    //controls functions\n    const play = () => VideoElement.current.play();\n    const pause = () => VideoElement.current.pause();\n    const moveToTimeStamp = (seconds) => VideoElement.current.currentTime = seconds;\n    const changePlaybackSpeed = (speed) => VideoElement.current.playbackRate = speed;\n\n    // socket events\n    socket.off(\"setVideo\").on(\"setVideo\", res => {\n        console.log(res);\n        const seconds = res.time;\n        const videoPath = res.videoPath;\n        const videoTitle = res.title;\n        const videoDescription = res.description;\n        setSource(videoPath);\n        setTitle(videoTitle);\n        setDescription(videoDescription);\n        setTimeout(() => {\n            moveToTimeStamp(seconds);\n            play();\n        }, 1000)\n\n    })\n    socket.off('playPlayer').on('playPlayer', () => {\n        if (!allowed) return;\n        play();\n    })\n    socket.off('pausePlayer').on('pausePlayer', () => {\n        if (!allowed) return;\n        pause();\n    })\n    socket.off('setTime').on('setTime', (res) => {\n        if (!allowed) return;\n        const currentTime = res.currTime;\n        moveToTimeStamp(currentTime);\n    })\n    socket.off('changePlaybackSpeed').on('changePlaybackSpeed', (res) => {\n        if (!allowed) return;\n        const playbackSpeed = res.playbackSpeed;\n        changePlaybackSpeed(playbackSpeed);\n    })\n\n\n    return (\n        <div className=''>\n            {/* <button onClick={() =>VideoElement.current.play()} className='bg-black w-[100px]'>Click</button> */}\n            <div className=\"flex h-[40rem]\">\n                <video ref={VideoElement} className='w-[70%]' src={`http://localhost:9002/file/video/${source}`} controls={!allowed} controlsList=\"nodownload\" preload='metadata'>\n\n                </video>\n            </div>\n            <div className='flex flex-row'>\n                <div className='m-2 text-2xl dark:text-white font-bold h-20 flex'>\n                    {title}\n                </div>\n            </div>\n                <button onClick={() => setAllowed(!allowed)} class=\"bg-blue-500 hover:bg-blue-700 text-white font-bold  py-2  px-4 rounded-md\">\n                    {allowed ? (<p className='text-xs'>Take Controls</p>) : (<p className='text-md'>AllowAdminControl</p>)}\n                </button>\n\n            <div className='m-3 text-md dark:bg-opacity-10 p-3 dark:text-white rounded-3xl bg-gray-200 dark:bg-white'>\n                {description}\n            </div>\n\n        </div>\n    )\n}\n\nexport default ViewerVideoPlayer\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}