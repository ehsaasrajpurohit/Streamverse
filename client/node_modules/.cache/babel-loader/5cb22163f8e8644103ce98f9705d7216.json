{"ast":null,"code":"var _jsxFileName = \"/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/src/AppWrapper.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useContext } from \"react\";\nimport { UserContext } from \"./Context/UserContext\";\nimport { RoomContext } from \"./Context/RoomContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst AppWrapper = props => {\n  _s();\n\n  const [userState, setUserState] = useContext(UserContext);\n  const [roomState, setRoomState] = useContext(RoomContext);\n\n  const UpdateUser = () => {\n    const token = localStorage.getItem('userTokenTime');\n\n    if (token) {\n      axios.post(\"http://localhost:9002/updateuser\", {\n        id: null\n      }, {\n        headers: {\n          'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem('userTokenTime')).token\n        }\n      }).then(res => {\n        const user = res.data;\n        setUserState({\n          userId: user._id,\n          email: user.email,\n          userName: user.name,\n          videoPlaylists: user.videoPlaylists,\n          audioPlaylists: user.audioPlaylists,\n          videoFavourites: user.videoFavourites,\n          audioFavourites: user.audioFavourites,\n          likedVideos: user.likedVideos,\n          likedAudios: user.likedAudios,\n          dislikedVideos: user.dislikedVideos,\n          dislikedAudios: user.dislikedAudios,\n          favouriteTags: user.favouriteTags\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  };\n\n  const UpdateRoom = () => {\n    const token = JSON.parse(localStorage.getItem('room'));\n\n    if (token) {\n      axios.post(\"http://localhost:9002/updateroom\", {\n        id: token\n      }, {\n        headers: {\n          'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem('userTokenTime')).token\n        }\n      }).then(async res => {\n        const room = res.data.room;\n        const id = res.data.id.toString();\n        console.log(room.userArray[0].userId + \" \" + typeof room.userArray[0].userId);\n        console.log(id + \" \" + typeof id);\n        const index = room.userArray.findIndex(user => user.userId == id);\n\n        try {\n          console.log(index + \" \" + id);\n          setRoomState({\n            roomId: room._id,\n            roomName: room.roomName,\n            userName: room.userArray[index].userName,\n            AdminID: room.AdminID,\n            role: room.userArray[index].role,\n            userArray: room.userArray\n          });\n        } catch (error) {\n          console.log(error);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  };\n\n  useEffect(() => {\n    document.getElementById('updateuser').click();\n    document.getElementById('updateroom').click();\n  }, []);\n  useEffect(() => console.log(roomState), [roomState]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [props.children, /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"updateuser\",\n        className: \"hidden\",\n        onClick: () => UpdateUser()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"updateroom\",\n        className: \"hidden\",\n        onClick: () => UpdateRoom()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(AppWrapper, \"l5fKR2DYjkdloSm1cHvrRJku5vk=\");\n\n_c = AppWrapper;\nexport default AppWrapper;\n\nvar _c;\n\n$RefreshReg$(_c, \"AppWrapper\");","map":{"version":3,"names":["useEffect","axios","useContext","UserContext","RoomContext","AppWrapper","props","userState","setUserState","roomState","setRoomState","UpdateUser","token","localStorage","getItem","post","id","headers","JSON","parse","then","res","user","data","userId","_id","email","userName","name","videoPlaylists","audioPlaylists","videoFavourites","audioFavourites","likedVideos","likedAudios","dislikedVideos","dislikedAudios","favouriteTags","catch","err","console","log","UpdateRoom","room","toString","userArray","index","findIndex","roomId","roomName","AdminID","role","error","document","getElementById","click","children"],"sources":["/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/src/AppWrapper.js"],"sourcesContent":["import { useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useContext } from \"react\";\nimport { UserContext } from \"./Context/UserContext\";\nimport { RoomContext } from \"./Context/RoomContext\";\n\n\nconst AppWrapper = (props) => {\n    const [userState, setUserState] = useContext(UserContext);\n    const [roomState, setRoomState] = useContext(RoomContext);\n    const UpdateUser = () => {\n        const token = localStorage.getItem('userTokenTime');\n        if (token) {\n            axios.post(\"http://localhost:9002/updateuser\", { id: null }, {\n                headers: {\n                    'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem('userTokenTime')).token\n                }\n            })\n                .then((res) => {\n                    const user = res.data;\n                    setUserState({\n                        userId: user._id,\n                        email: user.email,\n                        userName: user.name,\n                        videoPlaylists: user.videoPlaylists,\n                        audioPlaylists: user.audioPlaylists,\n                        videoFavourites: user.videoFavourites,\n                        audioFavourites: user.audioFavourites,\n                        likedVideos: user.likedVideos,\n                        likedAudios: user.likedAudios,\n                        dislikedVideos: user.dislikedVideos,\n                        dislikedAudios: user.dislikedAudios,\n                        favouriteTags: user.favouriteTags\n                    })\n                })\n                .catch((err) => {\n                    console.log(err);\n                })\n        }\n    }\n    const UpdateRoom = () => {\n        const token = JSON.parse(localStorage.getItem('room'));\n\n        if (token) {\n            axios.post(\"http://localhost:9002/updateroom\", { id: token }, {\n                headers: {\n                    'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem('userTokenTime')).token\n                }\n            })\n                .then(async (res) => {\n                    const room = res.data.room;\n                    const id = res.data.id.toString();\n                    console.log(room.userArray[0].userId +\" \" + typeof (room.userArray[0].userId))\n                    console.log(id + \" \" + typeof (id))\n                    \n                    const index = room.userArray.findIndex((user)=> user.userId == id );\n                    try {\n                        console.log(index + \" \" + id);\n                        setRoomState({\n                            roomId: room._id,\n                            roomName: room.roomName,\n                            userName: room.userArray[index].userName,\n                            AdminID: room.AdminID,\n                            role: room.userArray[index].role,\n                            userArray: room.userArray\n                        })\n                    } catch (error) {\n                        console.log(error)\n                    }\n                    \n                })\n                .catch((err) => {\n                    console.log(err);\n                })\n        }\n    }\n    useEffect(() => {\n        document.getElementById('updateuser').click();\n        document.getElementById('updateroom').click();\n\n    }, [])\n    useEffect(() => console.log(roomState), [roomState])\n\n    return (\n        <>\n            <div>\n                {props.children}\n                <button id=\"updateuser\" className=\"hidden\" onClick={() => UpdateUser()} />\n                <button id=\"updateroom\" className=\"hidden\" onClick={() => UpdateRoom()} />\n            </div>\n        </>\n    )\n}\n\nexport default AppWrapper;"],"mappings":"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"},"metadata":{},"sourceType":"module"}