{"ast":null,"code":"import e from \"@reach/portal\";\nimport n, { useRef as r, useDebugValue as t, useEffect as o, useLayoutEffect as i, useState as a, useCallback as c, useMemo as u, useImperativeHandle as s, forwardRef as l } from \"react\";\nimport { useMachine as d } from \"@xstate/react\";\nimport { useSpring as f, interpolate as v, animated as m, config as p } from \"react-spring\";\nimport { useDrag as y, rubberbandIfOutOfBounds as h } from \"react-use-gesture\";\nimport { createFocusTrap as g } from \"focus-trap\";\nimport { disableBodyScroll as S, enableBodyScroll as E } from \"body-scroll-lock\";\nimport { ResizeObserver as P } from \"@juggle/resize-observer\";\nimport { Machine as b, assign as R } from \"xstate\";\n\nfunction x() {\n  return x = Object.assign || function (e) {\n    for (var n = 1; n < arguments.length; n++) {\n      var r = arguments[n];\n\n      for (var t in r) Object.prototype.hasOwnProperty.call(r, t) && (e[t] = r[t]);\n    }\n\n    return e;\n  }, x.apply(this, arguments);\n}\n\nfunction C(e, n) {\n  if (null == e) return {};\n  var r,\n      t,\n      o = {},\n      i = Object.keys(e);\n\n  for (t = 0; t < i.length; t++) n.indexOf(r = i[t]) >= 0 || (o[r] = e[r]);\n\n  return o;\n}\n\nvar O = \"undefined\" != typeof window ? i : o;\n\nfunction N(e, n, r) {\n  return n = (n = +n) == n ? n : 0, r = (r = +r) == r ? r : 0, (e = +e) == e && (e = (e = e <= r ? e : r) >= n ? e : n), e;\n}\n\nfunction w(e) {\n  var n = Math.round(e);\n  if (Number.isNaN(e)) throw new TypeError(\"Found a NaN! Check your snapPoints / defaultSnap / snapTo \");\n  return n;\n}\n\nvar H = {\n  box: \"border-box\"\n};\n\nfunction D(e, n) {\n  var r = n.label,\n      o = n.enabled,\n      i = n.resizeSourceRef,\n      u = a(0),\n      s = u[0],\n      l = u[1];\n  t(r + \": \" + s);\n  var d = c(function (e) {\n    l(e[0].borderBoxSize[0].blockSize), i.current = \"element\";\n  }, [i]);\n  return O(function () {\n    if (e.current && o) {\n      var n = new P(d);\n      return n.observe(e.current, H), function () {\n        n.disconnect();\n      };\n    }\n  }, [e, d, o]), o ? s : 0;\n}\n\nfunction k(e) {\n  return void 0 === e && (e = 1e3), new Promise(function (n) {\n    return setTimeout(n, e);\n  });\n}\n\nvar z = {\n  DRAG: {\n    target: \"#overlay.dragging\",\n    actions: \"onOpenEnd\"\n  }\n},\n    j = {\n  RESIZE: {\n    target: \"#overlay.resizing\",\n    actions: \"onOpenEnd\"\n  }\n},\n    A = b({\n  id: \"overlay\",\n  initial: \"closed\",\n  context: {\n    initialState: \"CLOSED\"\n  },\n  states: {\n    closed: {\n      on: {\n        OPEN: \"opening\",\n        CLOSE: void 0\n      }\n    },\n    opening: {\n      initial: \"start\",\n      states: {\n        start: {\n          invoke: {\n            src: \"onOpenStart\",\n            onDone: \"transition\"\n          }\n        },\n        transition: {\n          always: [{\n            target: \"immediately\",\n            cond: \"initiallyOpen\"\n          }, {\n            target: \"smoothly\",\n            cond: \"initiallyClosed\"\n          }]\n        },\n        immediately: {\n          initial: \"open\",\n          states: {\n            open: {\n              invoke: {\n                src: \"openImmediately\",\n                onDone: \"activating\"\n              }\n            },\n            activating: {\n              invoke: {\n                src: \"activate\",\n                onDone: \"#overlay.opening.end\"\n              },\n              on: x({}, z, j)\n            }\n          }\n        },\n        smoothly: {\n          initial: \"visuallyHidden\",\n          states: {\n            visuallyHidden: {\n              invoke: {\n                src: \"renderVisuallyHidden\",\n                onDone: \"activating\"\n              }\n            },\n            activating: {\n              invoke: {\n                src: \"activate\",\n                onDone: \"open\"\n              }\n            },\n            open: {\n              invoke: {\n                src: \"openSmoothly\",\n                onDone: \"#overlay.opening.end\"\n              },\n              on: x({}, z, j)\n            }\n          }\n        },\n        end: {\n          invoke: {\n            src: \"onOpenEnd\",\n            onDone: \"done\"\n          },\n          on: {\n            CLOSE: \"#overlay.closing\",\n            DRAG: \"#overlay.dragging\"\n          }\n        },\n        done: {\n          type: \"final\"\n        }\n      },\n      on: x({}, {\n        CLOSE: {\n          target: \"#overlay.closing\",\n          actions: \"onOpenCancel\"\n        }\n      }),\n      onDone: \"open\"\n    },\n    open: {\n      on: {\n        DRAG: \"#overlay.dragging\",\n        SNAP: \"snapping\",\n        RESIZE: \"resizing\"\n      }\n    },\n    dragging: {\n      on: {\n        SNAP: \"snapping\"\n      }\n    },\n    snapping: {\n      initial: \"start\",\n      states: {\n        start: {\n          invoke: {\n            src: \"onSnapStart\",\n            onDone: \"snappingSmoothly\"\n          },\n          entry: [R({\n            y: function (e, n) {\n              return n.payload.y;\n            },\n            velocity: function (e, n) {\n              return n.payload.velocity;\n            },\n            snapSource: function (e, n) {\n              var r = n.payload.source;\n              return void 0 === r ? \"custom\" : r;\n            }\n          })]\n        },\n        snappingSmoothly: {\n          invoke: {\n            src: \"snapSmoothly\",\n            onDone: \"end\"\n          }\n        },\n        end: {\n          invoke: {\n            src: \"onSnapEnd\",\n            onDone: \"done\"\n          },\n          on: {\n            RESIZE: \"#overlay.resizing\",\n            SNAP: \"#overlay.snapping\",\n            CLOSE: \"#overlay.closing\",\n            DRAG: \"#overlay.dragging\"\n          }\n        },\n        done: {\n          type: \"final\"\n        }\n      },\n      on: {\n        SNAP: {\n          target: \"snapping\",\n          actions: \"onSnapEnd\"\n        },\n        RESIZE: {\n          target: \"#overlay.resizing\",\n          actions: \"onSnapCancel\"\n        },\n        DRAG: {\n          target: \"#overlay.dragging\",\n          actions: \"onSnapCancel\"\n        },\n        CLOSE: {\n          target: \"#overlay.closing\",\n          actions: \"onSnapCancel\"\n        }\n      },\n      onDone: \"open\"\n    },\n    resizing: {\n      initial: \"start\",\n      states: {\n        start: {\n          invoke: {\n            src: \"onResizeStart\",\n            onDone: \"resizingSmoothly\"\n          }\n        },\n        resizingSmoothly: {\n          invoke: {\n            src: \"resizeSmoothly\",\n            onDone: \"end\"\n          }\n        },\n        end: {\n          invoke: {\n            src: \"onResizeEnd\",\n            onDone: \"done\"\n          },\n          on: {\n            SNAP: \"#overlay.snapping\",\n            CLOSE: \"#overlay.closing\",\n            DRAG: \"#overlay.dragging\"\n          }\n        },\n        done: {\n          type: \"final\"\n        }\n      },\n      on: {\n        RESIZE: {\n          target: \"resizing\",\n          actions: \"onResizeEnd\"\n        },\n        SNAP: {\n          target: \"snapping\",\n          actions: \"onResizeCancel\"\n        },\n        DRAG: {\n          target: \"#overlay.dragging\",\n          actions: \"onResizeCancel\"\n        },\n        CLOSE: {\n          target: \"#overlay.closing\",\n          actions: \"onResizeCancel\"\n        }\n      },\n      onDone: \"open\"\n    },\n    closing: {\n      initial: \"start\",\n      states: {\n        start: {\n          invoke: {\n            src: \"onCloseStart\",\n            onDone: \"deactivating\"\n          },\n          on: {\n            OPEN: {\n              target: \"#overlay.open\",\n              actions: \"onCloseCancel\"\n            }\n          }\n        },\n        deactivating: {\n          invoke: {\n            src: \"deactivate\",\n            onDone: \"closingSmoothly\"\n          }\n        },\n        closingSmoothly: {\n          invoke: {\n            src: \"closeSmoothly\",\n            onDone: \"end\"\n          }\n        },\n        end: {\n          invoke: {\n            src: \"onCloseEnd\",\n            onDone: \"done\"\n          },\n          on: {\n            OPEN: {\n              target: \"#overlay.opening\",\n              actions: \"onCloseCancel\"\n            }\n          }\n        },\n        done: {\n          type: \"final\"\n        }\n      },\n      on: {\n        CLOSE: void 0,\n        OPEN: {\n          target: \"#overlay.opening\",\n          actions: \"onCloseCancel\"\n        }\n      },\n      onDone: \"closed\"\n    }\n  },\n  on: {\n    CLOSE: \"closing\"\n  }\n}, {\n  actions: {\n    onOpenCancel: function (e, n) {},\n    onSnapCancel: function (e, n) {},\n    onResizeCancel: function (e, n) {},\n    onCloseCancel: function (e, n) {},\n    onOpenEnd: function (e, n) {},\n    onSnapEnd: function (e, n) {},\n    onRezizeEnd: function (e, n) {}\n  },\n  services: {\n    onSnapStart: function () {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    onOpenStart: function () {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    onCloseStart: function () {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    onResizeStart: function () {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    onSnapEnd: function () {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    onOpenEnd: function () {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    onCloseEnd: function () {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    onResizeEnd: function () {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    renderVisuallyHidden: function (e, n) {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    activate: function (e, n) {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    deactivate: function (e, n) {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    openSmoothly: function (e, n) {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    openImmediately: function (e, n) {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    snapSmoothly: function (e, n) {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    resizeSmoothly: function (e, n) {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    closeSmoothly: function (e, n) {\n      try {\n        return Promise.resolve(k()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    }\n  },\n  guards: {\n    initiallyClosed: function (e) {\n      return \"CLOSED\" === e.initialState;\n    },\n    initiallyOpen: function (e) {\n      return \"OPEN\" === e.initialState;\n    }\n  }\n}),\n    L = [\"children\", \"sibling\", \"className\", \"footer\", \"header\", \"open\", \"initialState\", \"lastSnapRef\", \"initialFocusRef\", \"onDismiss\", \"maxHeight\", \"defaultSnap\", \"snapPoints\", \"blocking\", \"scrollLocking\", \"style\", \"onSpringStart\", \"onSpringCancel\", \"onSpringEnd\", \"reserveScrollBarGap\", \"expandOnContentDrag\"],\n    T = [\"velocity\"],\n    M = [\"onRest\", \"config\"],\n    I = p.default,\n    F = I.tension,\n    G = I.friction,\n    Z = n.forwardRef(function (e, i) {\n  var l = e.children,\n      p = e.sibling,\n      P = e.className,\n      b = e.footer,\n      R = e.header,\n      H = e.open,\n      k = e.initialState,\n      z = e.lastSnapRef,\n      j = e.initialFocusRef,\n      I = e.onDismiss,\n      Z = e.maxHeight,\n      K = e.defaultSnap,\n      J = void 0 === K ? q : K,\n      Q = e.snapPoints,\n      U = void 0 === Q ? V : Q,\n      W = e.blocking,\n      X = void 0 === W || W,\n      Y = e.scrollLocking,\n      $ = void 0 === Y || Y,\n      _ = e.style,\n      ee = e.onSpringStart,\n      ne = e.onSpringCancel,\n      re = e.onSpringEnd,\n      te = e.reserveScrollBarGap,\n      oe = void 0 === te ? X : te,\n      ie = e.expandOnContentDrag,\n      ae = void 0 !== ie && ie,\n      ce = C(e, L),\n      ue = function () {\n    var e = a(!1),\n        n = e[0],\n        r = e[1],\n        t = a({}),\n        i = t[0],\n        u = t[1],\n        s = c(function (e) {\n      return u(function (n) {\n        var r;\n        return x({}, n, ((r = {})[e] = !1, r));\n      }), function () {\n        u(function (n) {\n          var r;\n          return x({}, n, ((r = {})[e] = !0, r));\n        });\n      };\n    }, []);\n    return o(function () {\n      var e = Object.values(i);\n      0 !== e.length && e.every(Boolean) && r(!0);\n    }, [i]), {\n      ready: n,\n      registerReady: s\n    };\n  }(),\n      se = ue.ready,\n      le = ue.registerReady,\n      de = r(!1),\n      fe = r(ee),\n      ve = r(ne),\n      me = r(re);\n\n  o(function () {\n    fe.current = ee, ve.current = ne, me.current = re;\n  }, [ne, ee, re]);\n\n  var pe,\n      ye,\n      he = f(function () {\n    return {\n      y: 0,\n      ready: 0,\n      maxHeight: 0,\n      minSnap: 0,\n      maxSnap: 0\n    };\n  }),\n      ge = he[0],\n      Se = he[1],\n      Ee = r(null),\n      Pe = r(null),\n      be = r(null),\n      Re = r(null),\n      xe = r(null),\n      Ce = r(null),\n      Oe = r(0),\n      Ne = r(),\n      we = r(!1),\n      He = (pe = u(function () {\n    return \"undefined\" != typeof window ? window.matchMedia(\"(prefers-reduced-motion: reduce)\") : null;\n  }, []), ye = r(null == pe ? void 0 : pe.matches), t(ye.current ? \"reduce\" : \"no-preference\"), o(function () {\n    var e = function (e) {\n      ye.current = e.matches;\n    };\n\n    return null == pe || pe.addListener(e), function () {\n      return null == pe ? void 0 : pe.removeListener(e);\n    };\n  }, [pe]), ye),\n      De = function (e) {\n    var n = e.targetRef,\n        i = e.enabled,\n        a = e.reserveScrollBarGap,\n        c = r({\n      activate: function () {\n        throw new TypeError(\"Tried to activate scroll lock too early\");\n      },\n      deactivate: function () {}\n    });\n    return t(i ? \"Enabled\" : \"Disabled\"), o(function () {\n      if (!i) return c.current.deactivate(), void (c.current = {\n        activate: function () {},\n        deactivate: function () {}\n      });\n      var e = n.current,\n          r = !1;\n      c.current = {\n        activate: function () {\n          r || (r = !0, S(e, {\n            allowTouchMove: function (e) {\n              return e.closest(\"[data-body-scroll-lock-ignore]\");\n            },\n            reserveScrollBarGap: a\n          }));\n        },\n        deactivate: function () {\n          r && (r = !1, E(e));\n        }\n      };\n    }, [i, n, a]), c;\n  }({\n    targetRef: Pe,\n    enabled: se && $,\n    reserveScrollBarGap: oe\n  }),\n      ke = function (e) {\n    var n = e.targetRef,\n        i = e.enabled,\n        a = r({\n      activate: function () {\n        throw new TypeError(\"Tried to activate aria hider too early\");\n      },\n      deactivate: function () {}\n    });\n    return t(i ? \"Enabled\" : \"Disabled\"), o(function () {\n      if (!i) return a.current.deactivate(), void (a.current = {\n        activate: function () {},\n        deactivate: function () {}\n      });\n      var e = n.current,\n          r = !1,\n          t = [],\n          o = [];\n      a.current = {\n        activate: function () {\n          if (!r) {\n            r = !0;\n            var n = e.parentNode;\n            document.querySelectorAll(\"body > *\").forEach(function (e) {\n              if (e !== n) {\n                var r = e.getAttribute(\"aria-hidden\");\n                null !== r && \"false\" !== r || (t.push(r), o.push(e), e.setAttribute(\"aria-hidden\", \"true\"));\n              }\n            });\n          }\n        },\n        deactivate: function () {\n          r && (r = !1, o.forEach(function (e, n) {\n            var r = t[n];\n            null === r ? e.removeAttribute(\"aria-hidden\") : e.setAttribute(\"aria-hidden\", r);\n          }), t = [], o = []);\n        }\n      };\n    }, [n, i]), a;\n  }({\n    targetRef: Ee,\n    enabled: se && X\n  }),\n      ze = function (e) {\n    var n = e.targetRef,\n        i = e.fallbackRef,\n        a = e.initialFocusRef,\n        c = e.enabled,\n        u = r({\n      activate: function () {\n        throw new TypeError(\"Tried to activate focus trap too early\");\n      },\n      deactivate: function () {}\n    });\n    return t(c ? \"Enabled\" : \"Disabled\"), o(function () {\n      if (!c) return u.current.deactivate(), void (u.current = {\n        activate: function () {},\n        deactivate: function () {}\n      });\n      var e = i.current,\n          r = g(n.current, {\n        onActivate: void 0,\n        initialFocus: a ? function () {\n          return (null == a ? void 0 : a.current) || e;\n        } : void 0,\n        fallbackFocus: e,\n        escapeDeactivates: !1,\n        clickOutsideDeactivates: !1\n      }),\n          t = !1;\n      u.current = {\n        activate: function () {\n          try {\n            return t ? Promise.resolve() : (t = !0, Promise.resolve(r.activate()).then(function () {\n              return Promise.resolve(new Promise(function (e) {\n                return setTimeout(function () {\n                  return e(void 0);\n                }, 0);\n              })).then(function () {});\n            }));\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        },\n        deactivate: function () {\n          t && (t = !1, r.deactivate());\n        }\n      };\n    }, [c, i, a, n]), u;\n  }({\n    targetRef: Ee,\n    fallbackRef: Ce,\n    initialFocusRef: j || void 0,\n    enabled: se && X && !1 !== j\n  }),\n      je = function (e) {\n    var n = e.getSnapPoints,\n        i = e.heightRef,\n        c = e.lastSnapRef,\n        s = e.ready,\n        l = function (e) {\n      var n = e.contentRef,\n          i = e.controlledMaxHeight,\n          c = e.footerEnabled,\n          s = e.footerRef,\n          l = e.headerEnabled,\n          d = e.headerRef,\n          f = e.registerReady,\n          v = e.resizeSourceRef,\n          m = u(function () {\n        return f(\"contentHeight\");\n      }, [f]),\n          p = function (e, n, i) {\n        var c = u(function () {\n          return n(\"maxHeight\");\n        }, [n]),\n            s = a(function () {\n          return w(e) || \"undefined\" != typeof window ? window.innerHeight : 0;\n        }),\n            l = s[0],\n            d = s[1],\n            f = l > 0,\n            v = r(0);\n        return t(e ? \"controlled\" : \"auto\"), o(function () {\n          f && c();\n        }, [f, c]), O(function () {\n          if (e) return d(w(e)), void (i.current = \"maxheightprop\");\n\n          var n = function () {\n            v.current || (v.current = requestAnimationFrame(function () {\n              d(window.innerHeight), i.current = \"window\", v.current = 0;\n            }));\n          };\n\n          return window.addEventListener(\"resize\", n), d(window.innerHeight), i.current = \"window\", c(), function () {\n            window.removeEventListener(\"resize\", n), cancelAnimationFrame(v.current);\n          };\n        }, [e, c, i]), l;\n      }(i, f, v),\n          y = D(d, {\n        label: \"headerHeight\",\n        enabled: l,\n        resizeSourceRef: v\n      }),\n          h = D(n, {\n        label: \"contentHeight\",\n        enabled: !0,\n        resizeSourceRef: v\n      }),\n          g = D(s, {\n        label: \"footerHeight\",\n        enabled: c,\n        resizeSourceRef: v\n      }),\n          S = Math.min(p - y - g, h) + y + g;\n\n      t(\"minHeight: \" + S);\n      var E = h > 0;\n      return o(function () {\n        E && m();\n      }, [E, m]), {\n        maxHeight: p,\n        minHeight: S,\n        headerHeight: y,\n        footerHeight: g\n      };\n    }({\n      contentRef: e.contentRef,\n      controlledMaxHeight: e.controlledMaxHeight,\n      footerEnabled: e.footerEnabled,\n      footerRef: e.footerRef,\n      headerEnabled: e.headerEnabled,\n      headerRef: e.headerRef,\n      registerReady: e.registerReady,\n      resizeSourceRef: e.resizeSourceRef\n    }),\n        d = l.maxHeight,\n        f = l.minHeight,\n        v = l.headerHeight,\n        m = l.footerHeight,\n        p = function (e, n) {\n      var r = [].concat(e).map(w).reduce(function (e, r) {\n        return e.add(N(r, 0, n)), e;\n      }, new Set()),\n          t = Array.from(r),\n          o = Math.min.apply(Math, t);\n      if (Number.isNaN(o)) throw new TypeError(\"minSnap is NaN\");\n      var i = Math.max.apply(Math, t);\n      if (Number.isNaN(i)) throw new TypeError(\"maxSnap is NaN\");\n      return {\n        snapPoints: t,\n        minSnap: o,\n        maxSnap: i\n      };\n    }(s ? n({\n      height: i.current,\n      footerHeight: m,\n      headerHeight: v,\n      minHeight: f,\n      maxHeight: d\n    }) : [0], d),\n        y = p.snapPoints,\n        h = p.minSnap,\n        g = p.maxSnap;\n\n    return t(\"minSnap: \" + h + \", maxSnap:\" + g), {\n      minSnap: h,\n      maxSnap: g,\n      findSnap: function (e) {\n        var n = w(\"function\" == typeof e ? e({\n          footerHeight: m,\n          headerHeight: v,\n          height: i.current,\n          minHeight: f,\n          maxHeight: d,\n          snapPoints: y,\n          lastSnap: c.current\n        }) : e);\n        return y.reduce(function (e, r) {\n          return Math.abs(r - n) < Math.abs(e - n) ? r : e;\n        }, h);\n      },\n      maxHeight: d\n    };\n  }({\n    contentRef: be,\n    controlledMaxHeight: Z,\n    footerEnabled: !!b,\n    footerRef: xe,\n    getSnapPoints: U,\n    headerEnabled: !1 !== R,\n    headerRef: Re,\n    heightRef: Oe,\n    lastSnapRef: z,\n    ready: se,\n    registerReady: le,\n    resizeSourceRef: Ne\n  }),\n      Ae = je.minSnap,\n      Le = je.maxSnap,\n      Te = je.maxHeight,\n      Me = je.findSnap,\n      Ie = r(Te),\n      Fe = r(Ae),\n      Ge = r(Le),\n      Ze = r(Me),\n      Be = r(0);\n\n  O(function () {\n    Ie.current = Te, Ge.current = Le, Fe.current = Ae, Ze.current = Me, Be.current = Me(J);\n  }, [Me, J, Te, Le, Ae]);\n  var qe = c(function (e) {\n    var n = e.onRest,\n        r = e.config,\n        t = (r = void 0 === r ? {} : r).velocity,\n        o = void 0 === t ? 1 : t,\n        i = C(r, T),\n        a = C(e, M);\n    return new Promise(function (e) {\n      return Se(x({}, a, {\n        config: x({\n          velocity: o\n        }, i, {\n          mass: 1,\n          tension: F,\n          friction: Math.max(G, G + (G - G * o))\n        }),\n        onRest: function () {\n          var r = [].slice.call(arguments);\n          e.apply(void 0, r), null == n || n.apply(void 0, r);\n        }\n      }));\n    });\n  }, [Se]),\n      Ve = d(A, {\n    devTools: !1,\n    actions: {\n      onOpenCancel: c(function () {\n        return null == ve.current ? void 0 : ve.current({\n          type: \"OPEN\"\n        });\n      }, []),\n      onSnapCancel: c(function (e) {\n        return null == ve.current ? void 0 : ve.current({\n          type: \"SNAP\",\n          source: e.snapSource\n        });\n      }, []),\n      onCloseCancel: c(function () {\n        return null == ve.current ? void 0 : ve.current({\n          type: \"CLOSE\"\n        });\n      }, []),\n      onResizeCancel: c(function () {\n        return null == ve.current ? void 0 : ve.current({\n          type: \"RESIZE\",\n          source: Ne.current\n        });\n      }, []),\n      onOpenEnd: c(function () {\n        return null == me.current ? void 0 : me.current({\n          type: \"OPEN\"\n        });\n      }, []),\n      onSnapEnd: c(function (e, n) {\n        return null == me.current ? void 0 : me.current({\n          type: \"SNAP\",\n          source: e.snapSource\n        });\n      }, []),\n      onResizeEnd: c(function () {\n        return null == me.current ? void 0 : me.current({\n          type: \"RESIZE\",\n          source: Ne.current\n        });\n      }, [])\n    },\n    context: {\n      initialState: k\n    },\n    services: {\n      onSnapStart: c(function (e, n) {\n        try {\n          return Promise.resolve(null == fe.current ? void 0 : fe.current({\n            type: \"SNAP\",\n            source: n.payload.source || \"custom\"\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      onOpenStart: c(function () {\n        try {\n          return Promise.resolve(null == fe.current ? void 0 : fe.current({\n            type: \"OPEN\"\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      onCloseStart: c(function () {\n        try {\n          return Promise.resolve(null == fe.current ? void 0 : fe.current({\n            type: \"CLOSE\"\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      onResizeStart: c(function () {\n        try {\n          return Promise.resolve(null == fe.current ? void 0 : fe.current({\n            type: \"RESIZE\",\n            source: Ne.current\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      onSnapEnd: c(function (e, n) {\n        try {\n          return Promise.resolve(null == me.current ? void 0 : me.current({\n            type: \"SNAP\",\n            source: e.snapSource\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      onOpenEnd: c(function () {\n        try {\n          return Promise.resolve(null == me.current ? void 0 : me.current({\n            type: \"OPEN\"\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      onCloseEnd: c(function () {\n        try {\n          return Promise.resolve(null == me.current ? void 0 : me.current({\n            type: \"CLOSE\"\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      onResizeEnd: c(function () {\n        try {\n          return Promise.resolve(null == me.current ? void 0 : me.current({\n            type: \"RESIZE\",\n            source: Ne.current\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      renderVisuallyHidden: c(function (e, n) {\n        try {\n          return Promise.resolve(qe({\n            y: Be.current,\n            ready: 0,\n            maxHeight: Ie.current,\n            maxSnap: Ge.current,\n            minSnap: Be.current,\n            immediate: !0\n          })).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [qe]),\n      activate: c(function (e, n) {\n        try {\n          return de.current = !0, Promise.resolve(Promise.all([De.current.activate(), ze.current.activate(), ke.current.activate()])).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [ke, ze, De]),\n      deactivate: c(function () {\n        try {\n          return De.current.deactivate(), ze.current.deactivate(), ke.current.deactivate(), de.current = !1, Promise.resolve();\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [ke, ze, De]),\n      openImmediately: c(function () {\n        try {\n          return Oe.current = Be.current, Promise.resolve(qe({\n            y: Be.current,\n            ready: 1,\n            maxHeight: Ie.current,\n            maxSnap: Ge.current,\n            minSnap: Be.current,\n            immediate: !0\n          })).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [qe]),\n      openSmoothly: c(function () {\n        try {\n          return Promise.resolve(qe({\n            y: 0,\n            ready: 1,\n            maxHeight: Ie.current,\n            maxSnap: Ge.current,\n            minSnap: Be.current,\n            immediate: !0\n          })).then(function () {\n            return Oe.current = Be.current, Promise.resolve(qe({\n              y: Be.current,\n              ready: 1,\n              maxHeight: Ie.current,\n              maxSnap: Ge.current,\n              minSnap: Be.current,\n              immediate: He.current\n            })).then(function () {});\n          });\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [qe, He]),\n      snapSmoothly: c(function (e, n) {\n        try {\n          var r = Ze.current(e.y);\n          return Oe.current = r, z.current = r, Promise.resolve(qe({\n            y: r,\n            ready: 1,\n            maxHeight: Ie.current,\n            maxSnap: Ge.current,\n            minSnap: Fe.current,\n            immediate: He.current,\n            config: {\n              velocity: e.velocity\n            }\n          })).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [qe, z, He]),\n      resizeSmoothly: c(function () {\n        try {\n          var e = Ze.current(Oe.current);\n          return Oe.current = e, z.current = e, Promise.resolve(qe({\n            y: e,\n            ready: 1,\n            maxHeight: Ie.current,\n            maxSnap: Ge.current,\n            minSnap: Fe.current,\n            immediate: \"element\" !== Ne.current || He.current\n          })).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [qe, z, He]),\n      closeSmoothly: c(function (e, n) {\n        try {\n          return qe({\n            minSnap: Oe.current,\n            immediate: !0\n          }), Oe.current = 0, Promise.resolve(qe({\n            y: 0,\n            maxHeight: Ie.current,\n            maxSnap: Ge.current,\n            immediate: He.current\n          })).then(function () {\n            return Promise.resolve(qe({\n              ready: 0,\n              immediate: !0\n            })).then(function () {});\n          });\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [qe, He])\n    }\n  }),\n      Ke = Ve[0],\n      Je = Ve[1];\n  o(function () {\n    se && Je(H ? \"OPEN\" : \"CLOSE\");\n  }, [H, Je, se]), O(function () {\n    (Te || Le || Ae) && Je(\"RESIZE\");\n  }, [Te, Le, Ae, Je]), o(function () {\n    return function () {\n      De.current.deactivate(), ze.current.deactivate(), ke.current.deactivate();\n    };\n  }, [ke, ze, De]), s(i, function () {\n    return {\n      snapTo: function (e, n) {\n        var r = void 0 === n ? {} : n,\n            t = r.velocity,\n            o = void 0 === t ? 1 : t,\n            i = r.source,\n            a = void 0 === i ? \"custom\" : i;\n        Je(\"SNAP\", {\n          payload: {\n            y: Ze.current(e),\n            velocity: o,\n            source: a\n          }\n        });\n      },\n\n      get height() {\n        return Oe.current;\n      }\n\n    };\n  }, [Je]), o(function () {\n    var e = Pe.current,\n        n = function (e) {\n      we.current && e.preventDefault();\n    },\n        r = function (n) {\n      e.scrollTop < 0 && (requestAnimationFrame(function () {\n        e.style.overflow = \"hidden\", e.scrollTop = 0, e.style.removeProperty(\"overflow\");\n      }), n.preventDefault());\n    };\n\n    return ae && (e.addEventListener(\"scroll\", n), e.addEventListener(\"touchmove\", n), e.addEventListener(\"touchstart\", r)), function () {\n      e.removeEventListener(\"scroll\", n), e.removeEventListener(\"touchmove\", n), e.removeEventListener(\"touchstart\", r);\n    };\n  }, [ae, Pe]);\n  var Qe = y(function (e) {\n    var n = e.args,\n        r = (n = void 0 === n ? [] : n)[0],\n        t = (r = void 0 === r ? {} : r).closeOnTap,\n        o = void 0 !== t && t,\n        i = r.isContentDragging,\n        a = void 0 !== i && i,\n        c = e.cancel,\n        u = e.direction[1],\n        s = e.down,\n        l = e.first,\n        d = e.last,\n        f = e.memo,\n        v = void 0 === f ? ge.y.getValue() : f,\n        m = e.tap,\n        p = e.velocity,\n        y = -1 * e.movement[1];\n    if (!de.current) return c(), v;\n    if (I && o && m) return c(), setTimeout(function () {\n      return I();\n    }, 0), v;\n    if (m) return v;\n    var g = v + y,\n        S = y * p,\n        E = Math.max(Fe.current, Math.min(Ge.current, g + 2 * S));\n    if (!s && I && u > 0 && g + S < Fe.current / 2) return c(), I(), v;\n    var P = s ? I || Fe.current !== Ge.current ? h(g, I ? 0 : Fe.current, Ge.current, .55) : g < Fe.current ? h(g, Fe.current, 2 * Ge.current, .55) : h(g, Fe.current / 2, Ge.current, .55) : E;\n    return ae && a ? (P >= Ge.current && (P = Ge.current), v === Ge.current && Pe.current.scrollTop > 0 && (P = Ge.current), we.current = P < Ge.current) : we.current = !1, l && Je(\"DRAG\"), d ? (Je(\"SNAP\", {\n      payload: {\n        y: P,\n        velocity: p > .05 ? p : 1,\n        source: \"dragging\"\n      }\n    }), v) : (Se({\n      y: P,\n      ready: 1,\n      maxHeight: Ie.current,\n      maxSnap: Ge.current,\n      minSnap: Fe.current,\n      immediate: !0,\n      config: {\n        velocity: p\n      }\n    }), v);\n  }, {\n    filterTaps: !0\n  });\n  if (Number.isNaN(Ge.current)) throw new TypeError(\"maxSnapRef is NaN!!\");\n  if (Number.isNaN(Fe.current)) throw new TypeError(\"minSnapRef is NaN!!\");\n\n  var Ue = function (e) {\n    var n,\n        r = e.spring,\n        t = v([r.y, r.maxHeight], function (e, n) {\n      return Math.round(N(n - e, 0, 16)) + \"px\";\n    }),\n        o = v([r.y, r.minSnap, r.maxSnap], function (e, n, r) {\n      return N(e, n, r) + \"px\";\n    }),\n        i = v([r.y, r.minSnap, r.maxSnap], function (e, n, r) {\n      return e < n ? n - e + \"px\" : e > r ? r - e + \"px\" : \"0px\";\n    }),\n        a = v([r.y, r.maxSnap], function (e, n) {\n      return e >= n ? Math.ceil(e - n) : 0;\n    }),\n        c = v([r.y, r.minSnap], function (e, n) {\n      if (!n) return 0;\n      var r = Math.max(n / 2 - 45, 0);\n      return N((e - r) * (1 / (Math.min(n / 2 + 45, n) - r) + 0), 0, 1);\n    }),\n        u = v([r.y, r.minSnap], function (e, n) {\n      return n ? N(e / n, 0, 1) : 0;\n    });\n    return (n = {})[\"--rsbs-content-opacity\"] = c, n[\"--rsbs-backdrop-opacity\"] = u, n[\"--rsbs-antigap-scale-y\"] = a, n[\"--rsbs-overlay-translate-y\"] = i, n[\"--rsbs-overlay-rounded\"] = t, n[\"--rsbs-overlay-h\"] = o, n;\n  }({\n    spring: ge\n  });\n  /*#__PURE__*/\n\n\n  return n.createElement(m.div, x({}, ce, {\n    \"data-rsbs-root\": !0,\n    \"data-rsbs-state\": B.find(Ke.matches),\n    \"data-rsbs-is-blocking\": X,\n    \"data-rsbs-is-dismissable\": !!I,\n    \"data-rsbs-has-header\": !!R,\n    \"data-rsbs-has-footer\": !!b,\n    className: P,\n    ref: Ee,\n    style: x({}, Ue, _, {\n      opacity: ge.ready\n    })\n  }), p, X && /*#__PURE__*/n.createElement(\"div\", x({\n    key: \"backdrop\",\n    \"data-rsbs-backdrop\": !0\n  }, Qe({\n    closeOnTap: !0\n  }))), /*#__PURE__*/n.createElement(\"div\", {\n    key: \"overlay\",\n    \"aria-modal\": \"true\",\n    role: \"dialog\",\n    \"data-rsbs-overlay\": !0,\n    tabIndex: -1,\n    ref: Ce,\n    onKeyDown: function (e) {\n      \"Escape\" === e.key && (e.stopPropagation(), I && I());\n    }\n  }, !1 !== R && /*#__PURE__*/n.createElement(\"div\", x({\n    key: \"header\",\n    \"data-rsbs-header\": !0,\n    ref: Re\n  }, Qe()), R), /*#__PURE__*/n.createElement(\"div\", x({\n    key: \"scroll\",\n    \"data-rsbs-scroll\": !0,\n    ref: Pe\n  }, ae ? Qe({\n    isContentDragging: !0\n  }) : {}), /*#__PURE__*/n.createElement(\"div\", {\n    \"data-rsbs-content\": !0,\n    ref: be\n  }, l)), b && /*#__PURE__*/n.createElement(\"div\", x({\n    key: \"footer\",\n    ref: xe,\n    \"data-rsbs-footer\": !0\n  }, Qe()), b)));\n}),\n    B = [\"closed\", \"opening\", \"open\", \"closing\", \"dragging\", \"snapping\", \"resizing\"];\n\nfunction q(e) {\n  var n = e.lastSnap;\n  return null != n ? n : Math.min.apply(Math, e.snapPoints);\n}\n\nfunction V(e) {\n  return e.minHeight;\n}\n\nvar K = [\"onSpringStart\", \"onSpringEnd\", \"skipInitialTransition\"],\n    J = l(function (t, o) {\n  var i = t.onSpringStart,\n      u = t.onSpringEnd,\n      s = t.skipInitialTransition,\n      l = C(t, K),\n      d = a(!1),\n      f = d[0],\n      v = d[1],\n      m = r(),\n      p = r(null),\n      y = r(s && l.open ? \"OPEN\" : \"CLOSED\");\n  O(function () {\n    if (l.open) return cancelAnimationFrame(m.current), v(!0), function () {\n      y.current = \"CLOSED\";\n    };\n  }, [l.open]);\n  var h = c(function (e) {\n    return Promise.resolve(null == i ? void 0 : i(e)).then(function () {\n      \"OPEN\" === e.type && cancelAnimationFrame(m.current);\n    });\n  }, [i]),\n      g = c(function (e) {\n    return Promise.resolve(null == u ? void 0 : u(e)).then(function () {\n      \"CLOSE\" === e.type && (m.current = requestAnimationFrame(function () {\n        return v(!1);\n      }));\n    });\n  }, [u]);\n  return f ? /*#__PURE__*/n.createElement(e, {\n    \"data-rsbs-portal\": !0\n  }, /*#__PURE__*/n.createElement(Z, x({}, l, {\n    lastSnapRef: p,\n    ref: o,\n    initialState: y.current,\n    onSpringStart: h,\n    onSpringEnd: g\n  }))) : null;\n});\nexport { J as BottomSheet };","map":{"version":3,"mappings":"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","names":["useLayoutEffect","window","useLayoutEffectSafely","useEffect","clamp","number","lower","upper","roundAndCheckForNaN","unrounded","rounded","Math","round","Number","isNaN","TypeError","observerOptions","box","useElementSizeObserver","ref","label","enabled","resizeSourceRef","useState","size","setSize","useDebugValue","handleResize","useCallback","entries","borderBoxSize","blockSize","current","resizeObserver","ResizeObserver","observe","disconnect","sleep","ms","Promise","resolve","setTimeout","openToDrag","DRAG","target","actions","openToResize","RESIZE","overlayMachine","Machine","id","initial","context","initialState","states","closed","on","OPEN","CLOSE","undefined","opening","start","invoke","src","onDone","transition","always","cond","immediately","open","activating","smoothly","visuallyHidden","end","done","type","SNAP","dragging","snapping","entry","assign","y","_","payload","velocity","snapSource","source","r","snappingSmoothly","resizing","resizingSmoothly","closing","deactivating","closingSmoothly","onOpenCancel","event","onSnapCancel","onResizeCancel","onCloseCancel","onOpenEnd","onSnapEnd","onRezizeEnd","services","onSnapStart","onOpenStart","onCloseStart","onResizeStart","onCloseEnd","onResizeEnd","renderVisuallyHidden","activate","deactivate","openSmoothly","openImmediately","snapSmoothly","resizeSmoothly","closeSmoothly","guards","initiallyClosed","initiallyOpen","config","default","tension","friction","BottomSheet","React","forwardRef","children","sibling","className","footer","header","_open","lastSnapRef","initialFocusRef","onDismiss","controlledMaxHeight","maxHeight","defaultSnap","getDefaultSnap","_defaultSnap","snapPoints","getSnapPoints","_snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag","props","ready","setReady","readyMap","updateReadyMap","registerReady","key","Object","values","length","every","Boolean","useReady","canDragRef","useRef","onSpringStartRef","onSpringCancelRef","onSpringEndRef","mql","useReactSpring","minSnap","maxSnap","spring","set","containerRef","scrollRef","contentRef","headerRef","footerRef","overlayRef","heightRef","preventScrollingRef","prefersReducedMotion","useMemo","matchMedia","matches","handler","addListener","removeListener","scrollLockRef","targetRef","active","disableBodyScroll","allowTouchMove","el","closest","enableBodyScroll","useScrollLock","ariaHiderRef","originalValues","rootNodes","parentNode","document","querySelectorAll","forEach","node","attr","getAttribute","push","setAttribute","index","originalValue","removeAttribute","useAriaHider","focusTrapRef","fallbackRef","fallback","trap","createFocusTrap","onActivate","initialFocus","fallbackFocus","escapeDeactivates","clickOutsideDeactivates","then","useFocusTrap","footerEnabled","headerEnabled","innerHeight","setMaxHeight","raf","requestAnimationFrame","addEventListener","removeEventListener","cancelAnimationFrame","useMaxHeight","headerHeight","contentHeight","footerHeight","minHeight","min","useDimensions","unsafeSnaps","snapPointsDedupedSet","concat","map","reduce","acc","snapPoint","add","Set","Array","from","max","processSnapPoints","height","findSnap","numberOrCallback","querySnap","lastSnap","prev","curr","abs","useSnapPoints","maxHeightRef","minSnapRef","maxSnapRef","findSnapRef","defaultSnapRef","asyncSet","onRest","t","opts","mass","args","useMachine","devTools","immediate","all","snap","send","useImperativeHandle","snapTo","n","i","elem","preventScrolling","e","preventDefault","preventSafariOverscroll","scrollTop","overflow","removeProperty","bind","useDrag","closeOnTap","isContentDragging","cancel","direction","down","first","last","memo","getValue","tap","my","movement","rawY","predictedDistance","predictedY","newY","rubberbandIfOutOfBounds","filterTaps","interpolations","interpolateBorderRadius","interpolate","interpolateHeight","interpolateY","interpolateFiller","ceil","interpolateContentOpacity","minX","interpolateBackdrop","useSpringInterpolations","animated","div","publicStates","find","opacity","role","tabIndex","onKeyDown","stopPropagation","skipInitialTransition","mounted","setMounted","timerRef","initialStateRef","handleSpringStart","handleSpringEnd","Portal","_BottomSheet"],"sources":["/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/node_modules/react-spring-bottom-sheet/src/hooks/useLayoutEffect.tsx","/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/node_modules/react-spring-bottom-sheet/src/utils.ts","/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/node_modules/react-spring-bottom-sheet/src/hooks/useSnapPoints.tsx","/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/node_modules/react-spring-bottom-sheet/src/machines/overlay.ts","/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/node_modules/react-spring-bottom-sheet/src/BottomSheet.tsx","/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/node_modules/react-spring-bottom-sheet/src/hooks/useReady.tsx","/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/node_modules/react-spring-bottom-sheet/src/hooks/useReducedMotion.tsx","/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/node_modules/react-spring-bottom-sheet/src/hooks/useSpring.tsx","/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/node_modules/react-spring-bottom-sheet/src/hooks/useScrollLock.tsx","/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/node_modules/react-spring-bottom-sheet/src/hooks/useAriaHider.tsx","/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/node_modules/react-spring-bottom-sheet/src/hooks/useFocusTrap.tsx","/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/node_modules/react-spring-bottom-sheet/src/hooks/useSpringInterpolations.tsx","/Users/ehsaasrajpurohit/Desktop/Streamverse-Avishkar-main/client/node_modules/react-spring-bottom-sheet/src/index.tsx"],"sourcesContent":["import { useEffect, useLayoutEffect as useLayoutEffectSafely } from 'react'\n\n// Ensure the name used in components is useLayoutEffect so the eslint react hooks plugin works\nexport const useLayoutEffect =\n  typeof window !== 'undefined' ? useLayoutEffectSafely : useEffect\n","/* eslint-disable no-self-compare */\n\n// stolen from lodash\nexport function clamp(number: number, lower: number, upper: number) {\n  number = +number\n  lower = +lower\n  upper = +upper\n  lower = lower === lower ? lower : 0\n  upper = upper === upper ? upper : 0\n  if (number === number) {\n    number = number <= upper ? number : upper\n    number = number >= lower ? number : lower\n  }\n  return number\n}\n\n// Mwahaha easiest way to filter out NaN I ever saw! >:3\nexport function deleteNaN(arr) {\n  const set = new Set(arr)\n  set.delete(NaN)\n  return [...set]\n}\n\nexport function roundAndCheckForNaN(unrounded) {\n  const rounded = Math.round(unrounded)\n  if (Number.isNaN(unrounded)) {\n    throw new TypeError(\n      'Found a NaN! Check your snapPoints / defaultSnap / snapTo '\n    )\n  }\n\n  return rounded\n}\n\n// Validate, sanitize, round and dedupe snap points, as well as extracting the minSnap and maxSnap points\nexport function processSnapPoints(unsafeSnaps: number | number[], maxHeight) {\n  const safeSnaps = [].concat(unsafeSnaps).map(roundAndCheckForNaN)\n\n  const snapPointsDedupedSet = safeSnaps.reduce((acc, snapPoint) => {\n    acc.add(clamp(snapPoint, 0, maxHeight))\n    return acc\n  }, new Set<number>())\n\n  const snapPoints = Array.from(snapPointsDedupedSet)\n\n  const minSnap = Math.min(...snapPoints)\n  if (Number.isNaN(minSnap)) {\n    throw new TypeError('minSnap is NaN')\n  }\n  const maxSnap = Math.max(...snapPoints)\n  if (Number.isNaN(maxSnap)) {\n    throw new TypeError('maxSnap is NaN')\n  }\n\n  return {\n    snapPoints,\n    minSnap,\n    maxSnap,\n  }\n}\n\nexport const debugging =\n  process.env.NODE_ENV === 'development' && typeof window !== 'undefined'\n    ? window.location.search === '?debug'\n    : false\n","import React, {\n  useCallback,\n  useDebugValue,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react'\nimport { ResizeObserver, ResizeObserverEntry } from '@juggle/resize-observer'\nimport type { defaultSnapProps, ResizeSource, snapPoints } from '../types'\nimport { processSnapPoints, roundAndCheckForNaN } from '../utils'\nimport { useReady } from './useReady'\nimport { ResizeObserverOptions } from '@juggle/resize-observer/lib/ResizeObserverOptions'\nimport { useLayoutEffect } from './useLayoutEffect'\n\nexport function useSnapPoints({\n  contentRef,\n  controlledMaxHeight,\n  footerEnabled,\n  footerRef,\n  getSnapPoints,\n  headerEnabled,\n  headerRef,\n  heightRef,\n  lastSnapRef,\n  ready,\n  registerReady,\n  resizeSourceRef,\n}: {\n  contentRef: React.RefObject<Element>\n  controlledMaxHeight?: number\n  footerEnabled: boolean\n  footerRef: React.RefObject<Element>\n  getSnapPoints: snapPoints\n  headerEnabled: boolean\n  headerRef: React.RefObject<Element>\n  heightRef: React.RefObject<number>\n  lastSnapRef: React.RefObject<number>\n  ready: boolean\n  registerReady: ReturnType<typeof useReady>['registerReady']\n  resizeSourceRef: React.MutableRefObject<ResizeSource>\n}) {\n  const { maxHeight, minHeight, headerHeight, footerHeight } = useDimensions({\n    contentRef: contentRef,\n    controlledMaxHeight,\n    footerEnabled,\n    footerRef,\n    headerEnabled,\n    headerRef,\n    registerReady,\n    resizeSourceRef,\n  })\n\n  const { snapPoints, minSnap, maxSnap } = processSnapPoints(\n    ready\n      ? getSnapPoints({\n          height: heightRef.current,\n          footerHeight,\n          headerHeight,\n          minHeight,\n          maxHeight,\n        })\n      : [0],\n    maxHeight\n  )\n  //console.log({ snapPoints, minSnap, maxSnap })\n\n  // @TODO investigate the gains from memoizing this\n  function findSnap(\n    numberOrCallback: number | ((state: defaultSnapProps) => number)\n  ) {\n    let unsafeSearch: number\n    if (typeof numberOrCallback === 'function') {\n      unsafeSearch = numberOrCallback({\n        footerHeight,\n        headerHeight,\n        height: heightRef.current,\n        minHeight,\n        maxHeight,\n        snapPoints,\n        lastSnap: lastSnapRef.current,\n      })\n    } else {\n      unsafeSearch = numberOrCallback\n    }\n    const querySnap = roundAndCheckForNaN(unsafeSearch)\n    return snapPoints.reduce(\n      (prev, curr) =>\n        Math.abs(curr - querySnap) < Math.abs(prev - querySnap) ? curr : prev,\n      minSnap\n    )\n  }\n\n  useDebugValue(`minSnap: ${minSnap}, maxSnap:${maxSnap}`)\n\n  return { minSnap, maxSnap, findSnap, maxHeight }\n}\n\nfunction useDimensions({\n  contentRef,\n  controlledMaxHeight,\n  footerEnabled,\n  footerRef,\n  headerEnabled,\n  headerRef,\n  registerReady,\n  resizeSourceRef,\n}: {\n  contentRef: React.RefObject<Element>\n  controlledMaxHeight?: number\n  footerEnabled: boolean\n  footerRef: React.RefObject<Element>\n  headerEnabled: boolean\n  headerRef: React.RefObject<Element>\n  registerReady: ReturnType<typeof useReady>['registerReady']\n  resizeSourceRef: React.MutableRefObject<ResizeSource>\n}) {\n  const setReady = useMemo(() => registerReady('contentHeight'), [\n    registerReady,\n  ])\n  const maxHeight = useMaxHeight(\n    controlledMaxHeight,\n    registerReady,\n    resizeSourceRef\n  )\n\n  // @TODO probably better to forward props instead of checking refs to decide if it's enabled\n  const headerHeight = useElementSizeObserver(headerRef, {\n    label: 'headerHeight',\n    enabled: headerEnabled,\n    resizeSourceRef,\n  })\n  const contentHeight = useElementSizeObserver(contentRef, {\n    label: 'contentHeight',\n    enabled: true,\n    resizeSourceRef,\n  })\n  const footerHeight = useElementSizeObserver(footerRef, {\n    label: 'footerHeight',\n    enabled: footerEnabled,\n    resizeSourceRef,\n  })\n  const minHeight =\n    Math.min(maxHeight - headerHeight - footerHeight, contentHeight) +\n    headerHeight +\n    footerHeight\n\n  useDebugValue(`minHeight: ${minHeight}`)\n\n  const ready = contentHeight > 0\n  useEffect(() => {\n    if (ready) {\n      setReady()\n    }\n  }, [ready, setReady])\n\n  return {\n    maxHeight,\n    minHeight,\n    headerHeight,\n    footerHeight,\n  }\n}\n\nconst observerOptions: ResizeObserverOptions = {\n  // Respond to changes to padding, happens often on iOS when using env(safe-area-inset-bottom)\n  // And the user hides or shows the Safari browser toolbar\n  box: 'border-box',\n}\n/**\n * Hook for determining the size of an element using the Resize Observer API.\n *\n * @param ref - A React ref to an element\n */\nfunction useElementSizeObserver(\n  ref: React.RefObject<Element>,\n  {\n    label,\n    enabled,\n    resizeSourceRef,\n  }: {\n    label: string\n    enabled: boolean\n    resizeSourceRef: React.MutableRefObject<ResizeSource>\n  }\n): number {\n  let [size, setSize] = useState(0)\n\n  useDebugValue(`${label}: ${size}`)\n\n  const handleResize = useCallback(\n    (entries: ResizeObserverEntry[]) => {\n      // we only observe one element, so accessing the first entry here is fine\n      setSize(entries[0].borderBoxSize[0].blockSize)\n      resizeSourceRef.current = 'element'\n    },\n    [resizeSourceRef]\n  )\n\n  useLayoutEffect(() => {\n    if (!ref.current || !enabled) {\n      return\n    }\n\n    const resizeObserver = new ResizeObserver(handleResize)\n    resizeObserver.observe(ref.current, observerOptions)\n\n    return () => {\n      resizeObserver.disconnect()\n    }\n  }, [ref, handleResize, enabled])\n\n  return enabled ? size : 0\n}\n\n// Blazingly keep track of the current viewport height without blocking the thread, keeping that sweet 60fps on smartphones\nfunction useMaxHeight(\n  controlledMaxHeight,\n  registerReady: ReturnType<typeof useReady>['registerReady'],\n  resizeSourceRef: React.MutableRefObject<ResizeSource>\n) {\n  const setReady = useMemo(() => registerReady('maxHeight'), [registerReady])\n  const [maxHeight, setMaxHeight] = useState(() =>\n    roundAndCheckForNaN(controlledMaxHeight) || typeof window !== 'undefined'\n      ? window.innerHeight\n      : 0\n  )\n  const ready = maxHeight > 0\n  const raf = useRef(0)\n\n  useDebugValue(controlledMaxHeight ? 'controlled' : 'auto')\n\n  useEffect(() => {\n    if (ready) {\n      setReady()\n    }\n  }, [ready, setReady])\n\n  useLayoutEffect(() => {\n    // Bail if the max height is a controlled prop\n    if (controlledMaxHeight) {\n      setMaxHeight(roundAndCheckForNaN(controlledMaxHeight))\n      resizeSourceRef.current = 'maxheightprop'\n\n      return\n    }\n\n    const handleResize = () => {\n      if (raf.current) {\n        // bail to throttle the amount of resize changes\n        return\n      }\n\n      // throttle state changes using rAF\n      raf.current = requestAnimationFrame(() => {\n        setMaxHeight(window.innerHeight)\n        resizeSourceRef.current = 'window'\n\n        raf.current = 0\n      })\n    }\n    window.addEventListener('resize', handleResize)\n    setMaxHeight(window.innerHeight)\n    resizeSourceRef.current = 'window'\n    setReady()\n\n    return () => {\n      window.removeEventListener('resize', handleResize)\n      cancelAnimationFrame(raf.current)\n    }\n  }, [controlledMaxHeight, setReady, resizeSourceRef])\n\n  return maxHeight\n}\n","import { Machine, assign } from 'xstate'\n\n// This is the root machine, composing all the other machines and is the brain of the bottom sheet\n\ninterface OverlayStateSchema {\n  states: {\n    // the overlay usually starts in the closed position\n    closed: {}\n    opening: {\n      states: {\n        // Used to fire off the springStart event\n        start: {}\n        // Decide how to transition to the open state based on what the initialState is\n        transition: {}\n        // Fast enter animation, sheet is open by default\n        immediately: {\n          states: {\n            open: {}\n            activating: {}\n          }\n        }\n        smoothly: {\n          states: {\n            // This state only happens when the overlay should start in an open state, instead of animating from the bottom\n            // openImmediately: {}\n            // visuallyHidden will render the overlay in the open state, but with opacity 0\n            // doing this solves two problems:\n            // on Android focusing an input element will trigger the softkeyboard to show up, which will change the viewport height\n            // on iOS the focus event will break the view by triggering a scrollIntoView event if focus happens while the overlay is below the viewport and body got overflow:hidden\n            // by rendering things with opacity 0 we ensure keyboards and scrollIntoView all happen in a way that match up with what the sheet will look like.\n            // we can then move it to the opening position below the viewport, and animate it into view without worrying about height changes or scrolling overflow:hidden events\n            visuallyHidden: {}\n            // In this state we're activating focus traps, scroll locks and more, this will sometimes trigger soft keyboards and scrollIntoView\n            // @TODO we might want to add a delay here before proceeding to open, to give android and iOS enough time to adjust the viewport when focusing an interactive element\n            activating: {}\n            // Animates from the bottom\n            open: {}\n          }\n        }\n        // Used to fire off the springEnd event\n        end: {}\n        // And finally we're ready to transition to open\n        done: {}\n      }\n    }\n    open: {}\n    // dragging responds to user gestures, which may interrupt the opening state, closing state or snapping\n    // when interrupting an opening event, it fires onSpringEnd(OPEN) before onSpringStart(DRAG)\n    // when interrupting a closing event, it fires onSpringCancel(CLOSE) before onSpringStart(DRAG)\n    // when interrupting a dragging event, it fires onSpringCancel(SNAP) before onSpringStart(DRAG)\n    dragging: {}\n    // snapping happens whenever transitioning to a new snap point, often after dragging\n    snapping: {\n      states: {\n        start: {}\n        snappingSmoothly: {}\n        end: {}\n        done: {}\n      }\n    }\n    resizing: {\n      states: {\n        start: {}\n        resizingSmoothly: {}\n        end: {}\n        done: {}\n      }\n    }\n    closing: {\n      states: {\n        start: {}\n        deactivating: {}\n        closingSmoothly: {}\n        end: {}\n        done: {}\n      }\n    }\n  }\n}\n\ntype OverlayEvent =\n  | { type: 'OPEN' }\n  | {\n      type: 'SNAP'\n      payload: {\n        y: number\n        velocity: number\n        source: 'dragging' | 'custom' | string\n      }\n    }\n  | { type: 'CLOSE' }\n  | { type: 'DRAG' }\n  | { type: 'RESIZE' }\n\n// The context (extended state) of the machine\ninterface OverlayContext {\n  initialState: 'OPEN' | 'CLOSED'\n}\nfunction sleep(ms = 1000) {\n  return new Promise((resolve) => setTimeout(resolve, ms))\n}\n\nconst cancelOpen = {\n  CLOSE: { target: '#overlay.closing', actions: 'onOpenCancel' },\n}\nconst openToDrag = {\n  DRAG: { target: '#overlay.dragging', actions: 'onOpenEnd' },\n}\nconst openToResize = {\n  RESIZE: { target: '#overlay.resizing', actions: 'onOpenEnd' },\n}\n\nconst initiallyOpen = ({ initialState }) => initialState === 'OPEN'\nconst initiallyClosed = ({ initialState }) => initialState === 'CLOSED'\n\n// Copy paste the machine into https://xstate.js.org/viz/ to make sense of what's going on in here ;)\n\nexport const overlayMachine = Machine<\n  OverlayContext,\n  OverlayStateSchema,\n  OverlayEvent\n>(\n  {\n    id: 'overlay',\n    initial: 'closed',\n    context: { initialState: 'CLOSED' },\n    states: {\n      closed: { on: { OPEN: 'opening', CLOSE: undefined } },\n      opening: {\n        initial: 'start',\n        states: {\n          start: {\n            invoke: {\n              src: 'onOpenStart',\n              onDone: 'transition',\n            },\n          },\n          transition: {\n            always: [\n              { target: 'immediately', cond: 'initiallyOpen' },\n              { target: 'smoothly', cond: 'initiallyClosed' },\n            ],\n          },\n          immediately: {\n            initial: 'open',\n            states: {\n              open: {\n                invoke: { src: 'openImmediately', onDone: 'activating' },\n              },\n              activating: {\n                invoke: { src: 'activate', onDone: '#overlay.opening.end' },\n                on: { ...openToDrag, ...openToResize },\n              },\n            },\n          },\n          smoothly: {\n            initial: 'visuallyHidden',\n            states: {\n              visuallyHidden: {\n                invoke: { src: 'renderVisuallyHidden', onDone: 'activating' },\n              },\n              activating: {\n                invoke: { src: 'activate', onDone: 'open' },\n              },\n              open: {\n                invoke: { src: 'openSmoothly', onDone: '#overlay.opening.end' },\n                on: { ...openToDrag, ...openToResize },\n              },\n            },\n          },\n          end: {\n            invoke: { src: 'onOpenEnd', onDone: 'done' },\n            on: { CLOSE: '#overlay.closing', DRAG: '#overlay.dragging' },\n          },\n          done: {\n            type: 'final',\n          },\n        },\n        on: { ...cancelOpen },\n        onDone: 'open',\n      },\n      open: {\n        on: { DRAG: '#overlay.dragging', SNAP: 'snapping', RESIZE: 'resizing' },\n      },\n      dragging: {\n        on: { SNAP: 'snapping' },\n      },\n      snapping: {\n        initial: 'start',\n        states: {\n          start: {\n            invoke: {\n              src: 'onSnapStart',\n              onDone: 'snappingSmoothly',\n            },\n            entry: [\n              assign({\n                // @ts-expect-error\n                y: (_, { payload: { y } }) => y,\n                velocity: (_, { payload: { velocity } }) => velocity,\n                snapSource: (_, { payload: { source = 'custom' } }) => source,\n              }),\n            ],\n          },\n          snappingSmoothly: {\n            invoke: { src: 'snapSmoothly', onDone: 'end' },\n          },\n          end: {\n            invoke: { src: 'onSnapEnd', onDone: 'done' },\n            on: {\n              RESIZE: '#overlay.resizing',\n              SNAP: '#overlay.snapping',\n              CLOSE: '#overlay.closing',\n              DRAG: '#overlay.dragging',\n            },\n          },\n          done: { type: 'final' },\n        },\n        on: {\n          SNAP: { target: 'snapping', actions: 'onSnapEnd' },\n          RESIZE: { target: '#overlay.resizing', actions: 'onSnapCancel' },\n          DRAG: { target: '#overlay.dragging', actions: 'onSnapCancel' },\n          CLOSE: { target: '#overlay.closing', actions: 'onSnapCancel' },\n        },\n        onDone: 'open',\n      },\n      resizing: {\n        initial: 'start',\n        states: {\n          start: {\n            invoke: {\n              src: 'onResizeStart',\n              onDone: 'resizingSmoothly',\n            },\n          },\n          resizingSmoothly: {\n            invoke: { src: 'resizeSmoothly', onDone: 'end' },\n          },\n          end: {\n            invoke: { src: 'onResizeEnd', onDone: 'done' },\n            on: {\n              SNAP: '#overlay.snapping',\n              CLOSE: '#overlay.closing',\n              DRAG: '#overlay.dragging',\n            },\n          },\n          done: { type: 'final' },\n        },\n        on: {\n          RESIZE: { target: 'resizing', actions: 'onResizeEnd' },\n          SNAP: { target: 'snapping', actions: 'onResizeCancel' },\n          DRAG: { target: '#overlay.dragging', actions: 'onResizeCancel' },\n          CLOSE: { target: '#overlay.closing', actions: 'onResizeCancel' },\n        },\n        onDone: 'open',\n      },\n      closing: {\n        initial: 'start',\n        states: {\n          start: {\n            invoke: {\n              src: 'onCloseStart',\n              onDone: 'deactivating',\n            },\n            on: { OPEN: { target: '#overlay.open', actions: 'onCloseCancel' } },\n          },\n          deactivating: {\n            invoke: { src: 'deactivate', onDone: 'closingSmoothly' },\n          },\n          closingSmoothly: {\n            invoke: { src: 'closeSmoothly', onDone: 'end' },\n          },\n          end: {\n            invoke: { src: 'onCloseEnd', onDone: 'done' },\n            on: {\n              OPEN: { target: '#overlay.opening', actions: 'onCloseCancel' },\n            },\n          },\n          done: { type: 'final' },\n        },\n        on: {\n          CLOSE: undefined,\n          OPEN: { target: '#overlay.opening', actions: 'onCloseCancel' },\n        },\n        onDone: 'closed',\n      },\n    },\n    on: {\n      CLOSE: 'closing',\n    },\n  },\n  {\n    actions: {\n      onOpenCancel: (context, event) => {\n        console.log('onOpenCancel', { context, event })\n      },\n      onSnapCancel: (context, event) => {\n        console.log('onSnapCancel', { context, event })\n      },\n      onResizeCancel: (context, event) => {\n        console.log('onResizeCancel', { context, event })\n      },\n      onCloseCancel: (context, event) => {\n        console.log('onCloseCancel', { context, event })\n      },\n      onOpenEnd: (context, event) => {\n        console.log('onOpenCancel', { context, event })\n      },\n      onSnapEnd: (context, event) => {\n        console.log('onSnapEnd', { context, event })\n      },\n      onRezizeEnd: (context, event) => {\n        console.log('onRezizeEnd', { context, event })\n      },\n    },\n    services: {\n      onSnapStart: async () => {\n        await sleep()\n      },\n      onOpenStart: async () => {\n        await sleep()\n      },\n      onCloseStart: async () => {\n        await sleep()\n      },\n      onResizeStart: async () => {\n        await sleep()\n      },\n      onSnapEnd: async () => {\n        await sleep()\n      },\n      onOpenEnd: async () => {\n        await sleep()\n      },\n      onCloseEnd: async () => {\n        await sleep()\n      },\n      onResizeEnd: async () => {\n        await sleep()\n      },\n      renderVisuallyHidden: async (context, event) => {\n        console.group('renderVisuallyHidden')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      activate: async (context, event) => {\n        console.group('activate')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      deactivate: async (context, event) => {\n        console.group('deactivate')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      openSmoothly: async (context, event) => {\n        console.group('openSmoothly')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      openImmediately: async (context, event) => {\n        console.group('openImmediately')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      snapSmoothly: async (context, event) => {\n        console.group('snapSmoothly')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      resizeSmoothly: async (context, event) => {\n        console.group('resizeSmoothly')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      closeSmoothly: async (context, event) => {\n        console.group('closeSmoothly')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n    },\n    guards: { initiallyClosed, initiallyOpen },\n  }\n)\n","//\n// In order to greatly reduce complexity this component is designed to always transition to open on mount, and then\n// transition to a closed state later. This ensures that all memory used to keep track of animation and gesture state\n// can be reclaimed after the sheet is closed and then unmounted.\n// It also ensures that when transitioning to open on mount the state is always clean, not affected by previous states that could\n// cause race conditions.\n\nimport { useMachine } from '@xstate/react'\nimport React, {\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n} from 'react'\nimport { animated, config } from 'react-spring'\nimport { rubberbandIfOutOfBounds, useDrag } from 'react-use-gesture'\nimport {\n  useAriaHider,\n  useFocusTrap,\n  useLayoutEffect,\n  useReady,\n  useReducedMotion,\n  useScrollLock,\n  useSnapPoints,\n  useSpring,\n  useSpringInterpolations,\n} from './hooks'\nimport { overlayMachine } from './machines/overlay'\nimport type {\n  defaultSnapProps,\n  Props,\n  RefHandles,\n  ResizeSource,\n  SnapPointProps,\n} from './types'\nimport { debugging } from './utils'\n\nconst { tension, friction } = config.default\n\n// @TODO implement AbortController to deal with race conditions\n\n// @TODO rename to SpringBottomSheet and allow userland to import it directly, for those who want maximum control and minimal bundlesize\nexport const BottomSheet = React.forwardRef<\n  RefHandles,\n  {\n    initialState: 'OPEN' | 'CLOSED'\n    lastSnapRef: React.MutableRefObject<number | null>\n  } & Props\n>(function BottomSheetInternal(\n  {\n    children,\n    sibling,\n    className,\n    footer,\n    header,\n    open: _open,\n    initialState,\n    lastSnapRef,\n    initialFocusRef,\n    onDismiss,\n    maxHeight: controlledMaxHeight,\n    defaultSnap: getDefaultSnap = _defaultSnap,\n    snapPoints: getSnapPoints = _snapPoints,\n    blocking = true,\n    scrollLocking = true,\n    style,\n    onSpringStart,\n    onSpringCancel,\n    onSpringEnd,\n    reserveScrollBarGap = blocking,\n    expandOnContentDrag = false,\n    ...props\n  },\n  forwardRef\n) {\n  // Before any animations can start we need to measure a few things, like the viewport and the dimensions of content, and header + footer if they exist\n  // @TODO make ready its own state perhaps, before open or closed\n  const { ready, registerReady } = useReady()\n\n  // Controls the drag handler, used by spring operations that happen outside the render loop in React\n  const canDragRef = useRef(false)\n\n  // This way apps don't have to remember to wrap their callbacks in useCallback to avoid breaking the sheet\n  const onSpringStartRef = useRef(onSpringStart)\n  const onSpringCancelRef = useRef(onSpringCancel)\n  const onSpringEndRef = useRef(onSpringEnd)\n  useEffect(() => {\n    onSpringStartRef.current = onSpringStart\n    onSpringCancelRef.current = onSpringCancel\n    onSpringEndRef.current = onSpringEnd\n  }, [onSpringCancel, onSpringStart, onSpringEnd])\n\n  // Behold, the engine of it all!\n  const [spring, set] = useSpring()\n\n  const containerRef = useRef<HTMLDivElement>(null)\n  const scrollRef = useRef<HTMLDivElement>(null)\n  const contentRef = useRef<HTMLDivElement>(null)\n  const headerRef = useRef<HTMLDivElement>(null)\n  const footerRef = useRef<HTMLDivElement>(null)\n  const overlayRef = useRef<HTMLDivElement | null>(null)\n\n  // Keeps track of the current height, or the height transitioning to\n  const heightRef = useRef(0)\n  const resizeSourceRef = useRef<ResizeSource>()\n  const preventScrollingRef = useRef(false)\n\n  const prefersReducedMotion = useReducedMotion()\n\n  // \"Plugins\" huhuhu\n  const scrollLockRef = useScrollLock({\n    targetRef: scrollRef,\n    enabled: ready && scrollLocking,\n    reserveScrollBarGap,\n  })\n  const ariaHiderRef = useAriaHider({\n    targetRef: containerRef,\n    enabled: ready && blocking,\n  })\n  const focusTrapRef = useFocusTrap({\n    targetRef: containerRef,\n    fallbackRef: overlayRef,\n    initialFocusRef: initialFocusRef || undefined,\n    enabled: ready && blocking && initialFocusRef !== false,\n  })\n\n  const { minSnap, maxSnap, maxHeight, findSnap } = useSnapPoints({\n    contentRef,\n    controlledMaxHeight,\n    footerEnabled: !!footer,\n    footerRef,\n    getSnapPoints,\n    headerEnabled: header !== false,\n    headerRef,\n    heightRef,\n    lastSnapRef,\n    ready,\n    registerReady,\n    resizeSourceRef,\n  })\n\n  // Setup refs that are used in cases where full control is needed over when a side effect is executed\n  const maxHeightRef = useRef(maxHeight)\n  const minSnapRef = useRef(minSnap)\n  const maxSnapRef = useRef(maxSnap)\n  const findSnapRef = useRef(findSnap)\n  const defaultSnapRef = useRef(0)\n  // Sync the refs with current state, giving the spring full control over when to respond to changes\n  useLayoutEffect(() => {\n    maxHeightRef.current = maxHeight\n    maxSnapRef.current = maxSnap\n    minSnapRef.current = minSnap\n    findSnapRef.current = findSnap\n    defaultSnapRef.current = findSnap(getDefaultSnap)\n  }, [findSnap, getDefaultSnap, maxHeight, maxSnap, minSnap])\n\n  // New utility for using events safely\n  const asyncSet = useCallback<typeof set>(\n    // @ts-expect-error\n    ({ onRest, config: { velocity = 1, ...config } = {}, ...opts }) =>\n      new Promise((resolve) =>\n        set({\n          ...opts,\n          config: {\n            velocity,\n            ...config,\n            // @see https://springs.pomb.us\n            mass: 1,\n            // \"stiffness\"\n            tension,\n            // \"damping\"\n            friction: Math.max(\n              friction,\n              friction + (friction - friction * velocity)\n            ),\n          },\n          onRest: (...args) => {\n            resolve(...args)\n            onRest?.(...args)\n          },\n        })\n      ),\n    [set]\n  )\n  const [current, send] = useMachine(overlayMachine, {\n    devTools: debugging,\n    actions: {\n      onOpenCancel: useCallback(\n        () => onSpringCancelRef.current?.({ type: 'OPEN' }),\n        []\n      ),\n      onSnapCancel: useCallback(\n        (context) =>\n          onSpringCancelRef.current?.({\n            type: 'SNAP',\n            source: context.snapSource,\n          }),\n        []\n      ),\n      onCloseCancel: useCallback(\n        () => onSpringCancelRef.current?.({ type: 'CLOSE' }),\n        []\n      ),\n      onResizeCancel: useCallback(\n        () =>\n          onSpringCancelRef.current?.({\n            type: 'RESIZE',\n            source: resizeSourceRef.current,\n          }),\n        []\n      ),\n      onOpenEnd: useCallback(\n        () => onSpringEndRef.current?.({ type: 'OPEN' }),\n        []\n      ),\n      onSnapEnd: useCallback(\n        (context, event) =>\n          onSpringEndRef.current?.({\n            type: 'SNAP',\n            source: context.snapSource,\n          }),\n        []\n      ),\n      onResizeEnd: useCallback(\n        () =>\n          onSpringEndRef.current?.({\n            type: 'RESIZE',\n            source: resizeSourceRef.current,\n          }),\n        []\n      ),\n    },\n    context: { initialState },\n    services: {\n      onSnapStart: useCallback(\n        async (context, event) =>\n          onSpringStartRef.current?.({\n            type: 'SNAP',\n            source: event.payload.source || 'custom',\n          }),\n        []\n      ),\n      onOpenStart: useCallback(\n        async () => onSpringStartRef.current?.({ type: 'OPEN' }),\n        []\n      ),\n      onCloseStart: useCallback(\n        async () => onSpringStartRef.current?.({ type: 'CLOSE' }),\n        []\n      ),\n      onResizeStart: useCallback(\n        async () =>\n          onSpringStartRef.current?.({\n            type: 'RESIZE',\n            source: resizeSourceRef.current,\n          }),\n        []\n      ),\n      onSnapEnd: useCallback(\n        async (context, event) =>\n          onSpringEndRef.current?.({\n            type: 'SNAP',\n            source: context.snapSource,\n          }),\n        []\n      ),\n      onOpenEnd: useCallback(\n        async () => onSpringEndRef.current?.({ type: 'OPEN' }),\n        []\n      ),\n      onCloseEnd: useCallback(\n        async () => onSpringEndRef.current?.({ type: 'CLOSE' }),\n        []\n      ),\n      onResizeEnd: useCallback(\n        async () =>\n          onSpringEndRef.current?.({\n            type: 'RESIZE',\n            source: resizeSourceRef.current,\n          }),\n        []\n      ),\n      renderVisuallyHidden: useCallback(\n        async (context, event) => {\n          await asyncSet({\n            y: defaultSnapRef.current,\n            ready: 0,\n            maxHeight: maxHeightRef.current,\n            maxSnap: maxSnapRef.current,\n            // Using defaultSnapRef instead of minSnapRef to avoid animating `height` on open\n            minSnap: defaultSnapRef.current,\n            immediate: true,\n          })\n        },\n        [asyncSet]\n      ),\n      activate: useCallback(\n        async (context, event) => {\n          canDragRef.current = true\n          await Promise.all([\n            scrollLockRef.current.activate(),\n            focusTrapRef.current.activate(),\n            ariaHiderRef.current.activate(),\n          ])\n        },\n        [ariaHiderRef, focusTrapRef, scrollLockRef]\n      ),\n      deactivate: useCallback(async () => {\n        scrollLockRef.current.deactivate()\n        focusTrapRef.current.deactivate()\n        ariaHiderRef.current.deactivate()\n        canDragRef.current = false\n      }, [ariaHiderRef, focusTrapRef, scrollLockRef]),\n      openImmediately: useCallback(async () => {\n        heightRef.current = defaultSnapRef.current\n        await asyncSet({\n          y: defaultSnapRef.current,\n          ready: 1,\n          maxHeight: maxHeightRef.current,\n          maxSnap: maxSnapRef.current,\n          // Using defaultSnapRef instead of minSnapRef to avoid animating `height` on open\n          minSnap: defaultSnapRef.current,\n          immediate: true,\n        })\n      }, [asyncSet]),\n      openSmoothly: useCallback(async () => {\n        await asyncSet({\n          y: 0,\n          ready: 1,\n          maxHeight: maxHeightRef.current,\n          maxSnap: maxSnapRef.current,\n          // Using defaultSnapRef instead of minSnapRef to avoid animating `height` on open\n          minSnap: defaultSnapRef.current,\n          immediate: true,\n        })\n\n        heightRef.current = defaultSnapRef.current\n\n        await asyncSet({\n          y: defaultSnapRef.current,\n          ready: 1,\n          maxHeight: maxHeightRef.current,\n          maxSnap: maxSnapRef.current,\n          // Using defaultSnapRef instead of minSnapRef to avoid animating `height` on open\n          minSnap: defaultSnapRef.current,\n          immediate: prefersReducedMotion.current,\n        })\n      }, [asyncSet, prefersReducedMotion]),\n      snapSmoothly: useCallback(\n        async (context, event) => {\n          const snap = findSnapRef.current(context.y)\n          heightRef.current = snap\n          lastSnapRef.current = snap\n          await asyncSet({\n            y: snap,\n            ready: 1,\n            maxHeight: maxHeightRef.current,\n            maxSnap: maxSnapRef.current,\n            minSnap: minSnapRef.current,\n            immediate: prefersReducedMotion.current,\n            config: { velocity: context.velocity },\n          })\n        },\n        [asyncSet, lastSnapRef, prefersReducedMotion]\n      ),\n      resizeSmoothly: useCallback(async () => {\n        const snap = findSnapRef.current(heightRef.current)\n        heightRef.current = snap\n        lastSnapRef.current = snap\n        await asyncSet({\n          y: snap,\n          ready: 1,\n          maxHeight: maxHeightRef.current,\n          maxSnap: maxSnapRef.current,\n          minSnap: minSnapRef.current,\n          immediate:\n            resizeSourceRef.current === 'element'\n              ? prefersReducedMotion.current\n              : true,\n        })\n      }, [asyncSet, lastSnapRef, prefersReducedMotion]),\n      closeSmoothly: useCallback(\n        async (context, event) => {\n          // Avoid animating the height property on close and stay within FLIP bounds by upping the minSnap\n          asyncSet({\n            minSnap: heightRef.current,\n            immediate: true,\n          })\n\n          heightRef.current = 0\n\n          await asyncSet({\n            y: 0,\n            maxHeight: maxHeightRef.current,\n            maxSnap: maxSnapRef.current,\n            immediate: prefersReducedMotion.current,\n          })\n\n          await asyncSet({ ready: 0, immediate: true })\n        },\n        [asyncSet, prefersReducedMotion]\n      ),\n    },\n  })\n\n  useEffect(() => {\n    if (!ready) return\n\n    if (_open) {\n      send('OPEN')\n    } else {\n      send('CLOSE')\n    }\n  }, [_open, send, ready])\n  useLayoutEffect(() => {\n    // Adjust the height whenever the snap points are changed due to resize events\n    if (maxHeight || maxSnap || minSnap) {\n      send('RESIZE')\n    }\n  }, [maxHeight, maxSnap, minSnap, send])\n  useEffect(\n    () => () => {\n      // Ensure effects are cleaned up on unmount, in case they're not cleaned up otherwise\n      scrollLockRef.current.deactivate()\n      focusTrapRef.current.deactivate()\n      ariaHiderRef.current.deactivate()\n    },\n    [ariaHiderRef, focusTrapRef, scrollLockRef]\n  )\n\n  useImperativeHandle(\n    forwardRef,\n    () => ({\n      snapTo: (numberOrCallback, { velocity = 1, source = 'custom' } = {}) => {\n        send('SNAP', {\n          payload: {\n            y: findSnapRef.current(numberOrCallback),\n            velocity,\n            source,\n          },\n        })\n      },\n      get height() {\n        return heightRef.current\n      },\n    }),\n    [send]\n  )\n\n  useEffect(() => {\n    const elem = scrollRef.current\n\n    const preventScrolling = e => {\n      if (preventScrollingRef.current) {\n        e.preventDefault()\n      }\n    }\n\n    const preventSafariOverscroll = e => {\n      if (elem.scrollTop < 0) {\n        requestAnimationFrame(() => {\n          elem.style.overflow = 'hidden'\n          elem.scrollTop = 0\n          elem.style.removeProperty('overflow')\n        })\n        e.preventDefault()\n      }\n    }\n\n    if (expandOnContentDrag) {\n      elem.addEventListener('scroll', preventScrolling)\n      elem.addEventListener('touchmove', preventScrolling)\n      elem.addEventListener('touchstart', preventSafariOverscroll)\n    }\n    return () => {\n      elem.removeEventListener('scroll', preventScrolling)\n      elem.removeEventListener('touchmove', preventScrolling)\n      elem.removeEventListener('touchstart', preventSafariOverscroll)\n    }\n  }, [expandOnContentDrag, scrollRef])\n\n  const handleDrag = ({\n    args: [{ closeOnTap = false, isContentDragging = false } = {}] = [],\n    cancel,\n    direction: [, direction],\n    down,\n    first,\n    last,\n    memo = spring.y.getValue() as number,\n    movement: [, _my],\n    tap,\n    velocity,\n  }) => {\n    const my = _my * -1\n\n    // Cancel the drag operation if the canDrag state changed\n    if (!canDragRef.current) {\n      console.log('handleDrag cancelled dragging because canDragRef is false')\n      cancel()\n      return memo\n    }\n\n    if (onDismiss && closeOnTap && tap) {\n      cancel()\n      // Runs onDismiss in a timeout to avoid tap events on the backdrop from triggering click events on elements underneath\n      setTimeout(() => onDismiss(), 0)\n      return memo\n    }\n\n    // Filter out taps\n    if (tap) {\n      return memo\n    }\n\n    const rawY = memo + my\n    const predictedDistance = my * velocity\n    const predictedY = Math.max(\n      minSnapRef.current,\n      Math.min(maxSnapRef.current, rawY + predictedDistance * 2)\n    )\n\n    if (\n      !down &&\n      onDismiss &&\n      direction > 0 &&\n      rawY + predictedDistance < minSnapRef.current / 2\n    ) {\n      cancel()\n      onDismiss()\n      return memo\n    }\n\n    let newY = down\n      ? // @TODO figure out a better way to deal with rubberband overshooting if min and max have the same value\n        !onDismiss && minSnapRef.current === maxSnapRef.current\n        ? rawY < minSnapRef.current\n          ? rubberbandIfOutOfBounds(\n              rawY,\n              minSnapRef.current,\n              maxSnapRef.current * 2,\n              0.55\n            )\n          : rubberbandIfOutOfBounds(\n              rawY,\n              minSnapRef.current / 2,\n              maxSnapRef.current,\n              0.55\n            )\n        : rubberbandIfOutOfBounds(\n            rawY,\n            onDismiss ? 0 : minSnapRef.current,\n            maxSnapRef.current,\n            0.55\n          )\n      : predictedY\n\n    if (expandOnContentDrag && isContentDragging) {\n      if (newY >= maxSnapRef.current) {\n        newY = maxSnapRef.current\n      }\n\n      if (memo === maxSnapRef.current && scrollRef.current.scrollTop > 0) {\n        newY = maxSnapRef.current\n      }\n\n      preventScrollingRef.current = newY < maxSnapRef.current;\n    } else {\n      preventScrollingRef.current = false\n    }\n\n    if (first) {\n      send('DRAG')\n    }\n\n    if (last) {\n      send('SNAP', {\n        payload: {\n          y: newY,\n          velocity: velocity > 0.05 ? velocity : 1,\n          source: 'dragging',\n        },\n      })\n\n      return memo\n    }\n\n    // @TODO too many rerenders\n    //send('DRAG', { y: newY, velocity })\n    //*\n    set({\n      y: newY,\n      ready: 1,\n      maxHeight: maxHeightRef.current,\n      maxSnap: maxSnapRef.current,\n      minSnap: minSnapRef.current,\n      immediate: true,\n      config: { velocity },\n    })\n    // */\n\n    return memo\n  }\n\n  const bind = useDrag(handleDrag, {\n    filterTaps: true,\n  })\n\n  if (Number.isNaN(maxSnapRef.current)) {\n    throw new TypeError('maxSnapRef is NaN!!')\n  }\n  if (Number.isNaN(minSnapRef.current)) {\n    throw new TypeError('minSnapRef is NaN!!')\n  }\n\n  const interpolations = useSpringInterpolations({ spring })\n\n  return (\n    <animated.div\n      {...props}\n      data-rsbs-root\n      data-rsbs-state={publicStates.find(current.matches)}\n      data-rsbs-is-blocking={blocking}\n      data-rsbs-is-dismissable={!!onDismiss}\n      data-rsbs-has-header={!!header}\n      data-rsbs-has-footer={!!footer}\n      className={className}\n      ref={containerRef}\n      style={{\n        // spread in the interpolations yeees\n        ...interpolations,\n        // but allow overriding them/disabling them\n        ...style,\n        // Not overridable as the \"focus lock with opacity 0\" trick rely on it\n        // @TODO the line below only fails on TS <4\n        // @ts-ignore\n        opacity: spring.ready,\n      }}\n    >\n      {sibling}\n      {blocking && (\n        <div\n          // This component needs to be placed outside bottom-sheet, as bottom-sheet uses transform and thus creates a new context\n          // that clips this element to the container, not allowing it to cover the full page.\n          key=\"backdrop\"\n          data-rsbs-backdrop\n          {...bind({ closeOnTap: true })}\n        />\n      )}\n      <div\n        key=\"overlay\"\n        aria-modal=\"true\"\n        role=\"dialog\"\n        data-rsbs-overlay\n        tabIndex={-1}\n        ref={overlayRef}\n        onKeyDown={(event) => {\n          if (event.key === 'Escape') {\n            // Always stop propagation, to avoid weirdness for bottom sheets inside other bottom sheets\n            event.stopPropagation()\n            if (onDismiss) onDismiss()\n          }\n        }}\n      >\n        {header !== false && (\n          <div key=\"header\" data-rsbs-header ref={headerRef} {...bind()}>\n            {header}\n          </div>\n        )}\n        <div key=\"scroll\" data-rsbs-scroll ref={scrollRef} {...(expandOnContentDrag ? bind({ isContentDragging: true }) : {})}>\n          <div data-rsbs-content ref={contentRef}>\n            {children}\n          </div>\n        </div>\n        {footer && (\n          <div key=\"footer\" ref={footerRef} data-rsbs-footer {...bind()}>\n            {footer}\n          </div>\n        )}\n      </div>\n    </animated.div>\n  )\n})\n\n// Used for the data attribute, list over states available to CSS selectors\nconst publicStates = [\n  'closed',\n  'opening',\n  'open',\n  'closing',\n  'dragging',\n  'snapping',\n  'resizing',\n]\n\n// Default prop values that are callbacks, and it's nice to save some memory and reuse their instances since they're pure\nfunction _defaultSnap({ snapPoints, lastSnap }: defaultSnapProps) {\n  return lastSnap ?? Math.min(...snapPoints)\n}\nfunction _snapPoints({ minHeight }: SnapPointProps) {\n  return minHeight\n}\n","// Keeps track of wether everything is good to go or not, in the most efficient way possible\n\nimport { useCallback, useEffect, useState } from 'react'\n\nexport function useReady() {\n  const [ready, setReady] = useState(false)\n  const [readyMap, updateReadyMap] = useState<{ [key: string]: boolean }>({})\n\n  const registerReady = useCallback((key: string) => {\n    console.count(`registerReady:${key}`)\n    // Register the check we're gonna wait for until it's ready\n    updateReadyMap((ready) => ({ ...ready, [key]: false }))\n\n    return () => {\n      console.count(`setReady:${key}`)\n      // Set it to ready\n      updateReadyMap((ready) => ({ ...ready, [key]: true }))\n    }\n  }, [])\n\n  useEffect(() => {\n    const states = Object.values(readyMap)\n\n    if (states.length === 0) {\n      console.log('nope nothing registered yet')\n      return\n    }\n\n    const isReady = states.every(Boolean)\n    console.log('check if we are rready', readyMap, isReady)\n    if (isReady) {\n      console.warn('ready!')\n      setReady(true)\n    }\n  }, [readyMap])\n\n  return { ready, registerReady }\n}\n","import { useDebugValue, useEffect, useMemo, useRef } from 'react'\n\n// @TODO refactor to addEventListener\nexport function useReducedMotion() {\n  const mql = useMemo(\n    () =>\n      typeof window !== 'undefined'\n        ? window.matchMedia('(prefers-reduced-motion: reduce)')\n        : null,\n    []\n  )\n  const ref = useRef(mql?.matches)\n\n  useDebugValue(ref.current ? 'reduce' : 'no-preference')\n\n  useEffect(() => {\n    const handler = (event) => {\n      ref.current = event.matches\n    }\n    mql?.addListener(handler)\n\n    return () => mql?.removeListener(handler)\n  }, [mql])\n\n  return ref\n}\n","import { useSpring as useReactSpring } from 'react-spring'\n\n// Behold, the engine of it all!\n// Put in this file befause it makes it easier to type and I'm lazy! :D\n\nexport function useSpring() {\n  return useReactSpring(() => ({\n    y: 0,\n    ready: 0,\n    maxHeight: 0,\n    minSnap: 0,\n    maxSnap: 0,\n  }))\n}\n\nexport type Spring = ReturnType<typeof useSpring>[0]\nexport type SpringSet = ReturnType<typeof useSpring>[1]\n","import { disableBodyScroll, enableBodyScroll } from 'body-scroll-lock'\nimport { useDebugValue, useEffect, useRef } from 'react'\n\n/**\n * Handle scroll locking to ensure a good dragging experience on Android and iOS.\n *\n * On iOS the following may happen if scroll isn't locked:\n * - When dragging the sheet the background gets dragged at the same time.\n * - When dragging the page scroll is also affected, causing the drag to feel buggy and \"slow\".\n *\n * On Android it causes the chrome toolbar to pop down as you drag down, and hide as you drag up.\n * When it's in between two toolbar states it causes the framerate to drop way below 60fps on\n * the bottom sheet drag interaction.\n */\nexport function useScrollLock({\n  targetRef,\n  enabled,\n  reserveScrollBarGap,\n}: {\n  targetRef: React.RefObject<Element>\n  enabled: boolean\n  reserveScrollBarGap: boolean\n}) {\n  const ref = useRef<{ activate: () => void; deactivate: () => void }>({\n    activate: () => {\n      throw new TypeError('Tried to activate scroll lock too early')\n    },\n    deactivate: () => {},\n  })\n\n  useDebugValue(enabled ? 'Enabled' : 'Disabled')\n\n  useEffect(() => {\n    if (!enabled) {\n      ref.current.deactivate()\n      ref.current = { activate: () => {}, deactivate: () => {} }\n      return\n    }\n\n    const target = targetRef.current\n    let active = false\n\n    ref.current = {\n      activate: () => {\n        if (active) return\n        active = true\n        disableBodyScroll(target, {\n          allowTouchMove: (el) => el.closest('[data-body-scroll-lock-ignore]'),\n          reserveScrollBarGap,\n        })\n      },\n      deactivate: () => {\n        if (!active) return\n        active = false\n        enableBodyScroll(target)\n      },\n    }\n  }, [enabled, targetRef, reserveScrollBarGap])\n\n  return ref\n}\n","import React, { useDebugValue, useEffect, useRef } from 'react'\n\n// Handle hiding and restoring aria-hidden attributes\nexport function useAriaHider({\n  targetRef,\n  enabled,\n}: {\n  targetRef: React.RefObject<Element>\n  enabled: boolean\n}) {\n  const ref = useRef<{ activate: () => void; deactivate: () => void }>({\n    activate: () => {\n      throw new TypeError('Tried to activate aria hider too early')\n    },\n    deactivate: () => {},\n  })\n\n  useDebugValue(enabled ? 'Enabled' : 'Disabled')\n\n  useEffect(() => {\n    if (!enabled) {\n      ref.current.deactivate()\n      ref.current = { activate: () => {}, deactivate: () => {} }\n      return\n    }\n\n    const target = targetRef.current\n    let active = false\n    let originalValues: (null | string)[] = []\n    let rootNodes: Element[] = []\n\n    ref.current = {\n      activate: () => {\n        if (active) return\n        active = true\n\n        const parentNode = target.parentNode\n\n        document.querySelectorAll('body > *').forEach((node) => {\n          if (node === parentNode) {\n            return\n          }\n          let attr = node.getAttribute('aria-hidden')\n          let alreadyHidden = attr !== null && attr !== 'false'\n          if (alreadyHidden) {\n            return\n          }\n          originalValues.push(attr)\n          rootNodes.push(node)\n          node.setAttribute('aria-hidden', 'true')\n        })\n      },\n      deactivate: () => {\n        if (!active) return\n        active = false\n\n        rootNodes.forEach((node, index) => {\n          let originalValue = originalValues[index]\n          if (originalValue === null) {\n            node.removeAttribute('aria-hidden')\n          } else {\n            node.setAttribute('aria-hidden', originalValue)\n          }\n        })\n        originalValues = []\n        rootNodes = []\n      },\n    }\n  }, [targetRef, enabled])\n\n  return ref\n}\n","import { createFocusTrap } from 'focus-trap'\nimport { useDebugValue, useEffect, useRef } from 'react'\n\nexport function useFocusTrap({\n  targetRef,\n  fallbackRef,\n  initialFocusRef,\n  enabled,\n}: {\n  targetRef: React.RefObject<HTMLElement>\n  fallbackRef: React.RefObject<HTMLElement>\n  initialFocusRef?: React.RefObject<HTMLElement>\n  enabled: boolean\n}) {\n  const ref = useRef<{ activate: () => void; deactivate: () => void }>({\n    activate: () => {\n      throw new TypeError('Tried to activate focus trap too early')\n    },\n    deactivate: () => {},\n  })\n\n  useDebugValue(enabled ? 'Enabled' : 'Disabled')\n\n  useEffect(() => {\n    if (!enabled) {\n      ref.current.deactivate()\n      ref.current = { activate: () => {}, deactivate: () => {} }\n      return\n    }\n\n    const fallback = fallbackRef.current\n    const trap = createFocusTrap(targetRef.current, {\n      onActivate:\n        process.env.NODE_ENV !== 'production'\n          ? () => {\n              console.log('focus activate')\n            }\n          : undefined,\n      // If initialFocusRef is manually specified we don't want the first tabbable element to receive focus if initialFocusRef can't be found\n      initialFocus: initialFocusRef\n        ? () => initialFocusRef?.current || fallback\n        : undefined,\n      fallbackFocus: fallback,\n      escapeDeactivates: false,\n      clickOutsideDeactivates: false,\n    })\n    let active = false\n\n    ref.current = {\n      activate: async () => {\n        if (active) return\n        active = true\n\n        await trap.activate()\n        // it's difficult to know exactly when focus is udpated https://github.com/focus-trap/focus-trap/blob/036a72ec48b85414dda00ec0c40d631c8f0ae5ce/index.js#L369-L371\n        // This timeout is attempting to compromise between a reasonable guess, as well as not delaying the open transition more than necessary\n        await new Promise((resolve) => setTimeout(() => resolve(void 1), 0))\n      },\n      deactivate: () => {\n        if (!active) return\n        active = false\n\n        trap.deactivate()\n      },\n    }\n  }, [enabled, fallbackRef, initialFocusRef, targetRef])\n\n  return ref\n}\n","import { interpolate } from 'react-spring'\nimport type { Spring } from './useSpring'\nimport { clamp } from '../utils'\n\n// It's a bit easier to ensure interpolations don't accidentally use the wrong variables by\n// putting them here, in their own closure with explicitly defined variables used\n\n// Note that the callbacks in the interpolation functions close over their scope every time react renders\n// so it's important that if anything can change outside of render that needs to be available\n// in the interpolation then a ref must be used\n\nexport function useSpringInterpolations({\n  spring,\n}: {\n  spring: Spring\n}): React.CSSProperties {\n  // This effect is for removing rounded corners on phones when the sheet touches the top of the browser chrome\n  // as it's really ugly with the gaps border radius creates. This ensures it looks sleek.\n  // @TODO the ts-ignore comments are because the `extrapolate` param isn't in the TS defs for some reason\n  const interpolateBorderRadius = interpolate(\n    // @ts-expect-error\n    [spring.y, spring.maxHeight],\n    (y, maxHeight) => {\n      return `${Math.round(clamp(maxHeight - y, 0, 16))}px`\n    }\n  )\n\n  /*\n   * Only animate the height when absolute necessary\n   * @TODO currently it's only able to opt out of changing the height if there's just a single snapshot\n   *       but it should be possible to do it in other scenarios too, like on window resize,\n   *       or maybe even while dragging, but probably requires a more restrictive CSS.\n   *       As in now the sticky footer isn't overlapping the content, allowing `backdrop-filter: blur(8px)` effects.\n   *       A FLIP resize flow for content height would likely require the sticky elements to overlap the content area.\n   *       Could be done as a separat mode though, or a separate example CSS for max performance.\n   */\n  const interpolateHeight = interpolate(\n    // @ts-ignore\n    [spring.y, spring.minSnap, spring.maxSnap],\n    (y, minSnap, maxSnap) => `${clamp(y, minSnap, maxSnap)}px`\n  )\n\n  const interpolateY = interpolate(\n    // @ts-ignore\n    [spring.y, spring.minSnap, spring.maxSnap],\n    (y, minSnap, maxSnap) => {\n      if (y < minSnap) {\n        return `${minSnap - y}px`\n      }\n      if (y > maxSnap) {\n        return `${maxSnap - y}px`\n      }\n      return '0px'\n    }\n  )\n\n  const interpolateFiller = interpolate(\n    // @ts-ignore\n    [spring.y, spring.maxSnap],\n    (y, maxSnap) => {\n      if (y >= maxSnap) {\n        return Math.ceil(y - maxSnap)\n      }\n      return 0\n    }\n  )\n\n  const interpolateContentOpacity = interpolate(\n    // @ts-ignore\n    [spring.y, spring.minSnap],\n    (y, minSnap) => {\n      if (!minSnap) {\n        return 0\n      }\n      const minX = Math.max(minSnap / 2 - 45, 0)\n      const maxX = Math.min(minSnap / 2 + 45, minSnap)\n      const minY = 0\n      const maxY = 1\n\n      const slope = (maxY - minY) / (maxX - minX)\n      const res = (y - minX) * (slope + minY)\n      return clamp(res, 0, 1)\n    }\n  )\n\n  const interpolateBackdrop = interpolate(\n    // @ts-ignore\n    [spring.y, spring.minSnap],\n    (y, minSnap) => (minSnap ? clamp(y / minSnap, 0, 1) : 0)\n  )\n\n  return {\n    // Fancy content fade-in effect\n    ['--rsbs-content-opacity' as any]: interpolateContentOpacity,\n    // Fading in the backdrop\n    ['--rsbs-backdrop-opacity' as any]: interpolateBackdrop,\n    // Scaling the antigap in the bottom\n    ['--rsbs-antigap-scale-y' as any]: interpolateFiller,\n    // Shifts the position of the bottom sheet, used on open and close primarily as snap point changes usually only interpolate the height\n    ['--rsbs-overlay-translate-y' as any]: interpolateY,\n    // Remove rounded borders when full height, it looks much better this way\n    ['--rsbs-overlay-rounded' as any]: interpolateBorderRadius,\n    // Animates the height state, not the most performant way but it's the safest with regards to mobile browser and focus/scrolling that could happen while animating\n    ['--rsbs-overlay-h' as any]: interpolateHeight,\n  }\n}\n","/* eslint-disable react/jsx-pascal-case */\nimport Portal from '@reach/portal'\nimport React, { forwardRef, useRef, useState, useCallback } from 'react'\nimport { BottomSheet as _BottomSheet } from './BottomSheet'\nimport type { Props, RefHandles, SpringEvent } from './types'\nimport { useLayoutEffect } from './hooks'\n\nexport type {\n  RefHandles as BottomSheetRef,\n  Props as BottomSheetProps,\n} from './types'\n\n// Because SSR is annoying to deal with, and all the million complaints about window, navigator and dom elenents!\nexport const BottomSheet = forwardRef<RefHandles, Props>(function BottomSheet(\n  { onSpringStart, onSpringEnd, skipInitialTransition, ...props },\n  ref\n) {\n  // Mounted state, helps SSR but also ensures you can't tab into the sheet while it's closed, or nav there in a screen reader\n  const [mounted, setMounted] = useState(false)\n  const timerRef = useRef<ReturnType<typeof requestAnimationFrame>>()\n  // The last point that the user snapped to, useful for open/closed toggling and the user defined height is remembered\n  const lastSnapRef = useRef(null)\n  // @TODO refactor to an initialState: OPEN | CLOSED property as it's much easier to understand\n  // And informs what we should animate from. If the sheet is mounted with open = true, then initialState = OPEN.\n  // When initialState = CLOSED, then internal sheet must first render with open={false} before setting open={props.open}\n  // It's only when initialState and props.open is mismatching that a intial transition should happen\n  // If they match then transitions will only happen when a user interaction or resize event happen.\n  const initialStateRef = useRef<'OPEN' | 'CLOSED'>(\n    skipInitialTransition && props.open ? 'OPEN' : 'CLOSED'\n  )\n\n  // Using layout effect to support cases where the bottom sheet have to appear already open, no transition\n  useLayoutEffect(() => {\n    if (props.open) {\n      cancelAnimationFrame(timerRef.current)\n      setMounted(true)\n\n      // Cleanup defaultOpen state on close\n      return () => {\n        initialStateRef.current = 'CLOSED'\n      }\n    }\n  }, [props.open])\n\n  const handleSpringStart = useCallback(\n    async function handleSpringStart(event: SpringEvent) {\n      // Forward the event\n      await onSpringStart?.(event)\n\n      if (event.type === 'OPEN') {\n        // Ensures that when it's opening we abort any pending unmount action\n        cancelAnimationFrame(timerRef.current)\n      }\n    },\n    [onSpringStart]\n  )\n\n  const handleSpringEnd = useCallback(\n    async function handleSpringEnd(event: SpringEvent) {\n      // Forward the event\n      await onSpringEnd?.(event)\n\n      if (event.type === 'CLOSE') {\n        // Unmount from the dom to avoid contents being tabbable or visible to screen readers while closed\n        timerRef.current = requestAnimationFrame(() => setMounted(false))\n      }\n    },\n    [onSpringEnd]\n  )\n\n  // This isn't just a performance optimization, it's also to avoid issues when running a non-browser env like SSR\n  if (!mounted) {\n    return null\n  }\n\n  return (\n    <Portal data-rsbs-portal>\n      <_BottomSheet\n        {...props}\n        lastSnapRef={lastSnapRef}\n        ref={ref}\n        initialState={initialStateRef.current}\n        onSpringStart={handleSpringStart}\n        onSpringEnd={handleSpringEnd}\n      />\n    </Portal>\n  )\n})\n"]},"metadata":{},"sourceType":"module"}